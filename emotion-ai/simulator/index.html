<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WIA Emotion AI - Affective Computing Simulator</title>
    <style>
        :root {
            --primary: #EC4899;
            --primary-dark: #DB2777;
            --secondary: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #0f172a;
            --bg-card: #1e293b;
            --text: #f8fafc;
            --text-muted: #94a3b8;
            --border: #334155;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 30px;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        .lang-switch {
            display: flex;
            gap: 10px;
        }
        .lang-btn {
            padding: 8px 16px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .lang-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }
        .lang-btn:hover { border-color: var(--primary); }

        /* Hero */
        .hero {
            text-align: center;
            padding: 40px 0;
        }
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: linear-gradient(90deg, var(--primary), #F472B6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .hero p { color: var(--text-muted); font-size: 1.1rem; }

        /* Tabs */
        .tabs {
            justify-content: center;
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .tab {
            padding: 12px 24px;
            border: 1px solid var(--border);
            background: var(--bg-card);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tab.active {
            background: var(--primary);
            border-color: var(--primary);
        }
        .tab:hover { border-color: var(--primary); }

        /* Panel */
        .panel {
            display: none;
            background: var(--bg-card);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid var(--border);
        }
        .panel.active { display: block; }
        .panel h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        /* Form */
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            background: var(--bg);
            color: var(--text);
            border-radius: 8px;
            font-size: 1rem;
        }
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
        }
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-secondary {
            background: var(--secondary);
            color: white;
        }
        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
        }
        .btn-outline:hover { border-color: var(--primary); }

        /* Emotion Card */
        .emotion-card {
            background: linear-gradient(135deg, #2d1f3d, #0f172a);
            border-radius: 16px;
            padding: 30px;
            border: 2px solid var(--primary);
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .emotion-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.2), transparent);
        }
        .emotion-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 25px;
        }
        .emotion-title {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 5px;
        }
        .emotion-id {
            font-family: monospace;
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        .emotion-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        .status-positive { background: var(--secondary); color: white; }
        .status-negative { background: var(--danger); color: white; }
        .status-neutral { background: var(--warning); color: black; }

        .emotion-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .info-item label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .info-item span {
            display: block;
            font-size: 1rem;
            margin-top: 3px;
        }

        /* Signal Display */
        .signal-display {
            background: var(--bg);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            white-space: pre;
            max-height: 400px;
            overflow-y: auto;
        }

        /* Emotion Grid */
        .emotion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .emotion-type-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.2s;
            cursor: pointer;
        }
        .emotion-type-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        .emotion-type-card.active {
            border-color: var(--primary);
            background: rgba(236, 72, 153, 0.1);
        }
        .emotion-type-card .emoji {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .emotion-type-card h4 {
            color: var(--primary);
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        .emotion-type-card p {
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        /* Valence-Arousal Chart */
        .va-chart {
            width: 300px;
            height: 300px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            position: relative;
            margin: 20px auto;
        }
        .va-chart::before,
        .va-chart::after {
            content: '';
            position: absolute;
            background: var(--border);
        }
        .va-chart::before {
            width: 1px;
            height: 100%;
            left: 50%;
        }
        .va-chart::after {
            width: 100%;
            height: 1px;
            top: 50%;
        }
        .va-point {
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(236, 72, 153, 0.5);
        }
        .va-labels {
            position: absolute;
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        .va-labels.top { top: 5px; left: 50%; transform: translateX(-50%); }
        .va-labels.bottom { bottom: 5px; left: 50%; transform: translateX(-50%); }
        .va-labels.left { left: 5px; top: 50%; transform: translateY(-50%); }
        .va-labels.right { right: 5px; top: 50%; transform: translateY(-50%); }

        /* Action Units Table */
        .au-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .au-table th, .au-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .au-table th {
            background: var(--bg);
            color: var(--primary);
        }
        .au-table tr:hover {
            background: rgba(236, 72, 153, 0.05);
        }
        .au-intensity {
            display: inline-block;
            width: 60px;
            height: 8px;
            background: var(--bg);
            border-radius: 4px;
            overflow: hidden;
        }
        .au-intensity-bar {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
        }

        /* Top Navigation */
        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 10px;
        }
        .nav-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .nav-home {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text);
            text-decoration: none;
            font-weight: bold;
        }
        .nav-home:hover {
            color: var(--primary);
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        .breadcrumb a {
            color: var(--text-muted);
            text-decoration: none;
        }
        .breadcrumb a:hover {
            color: var(--primary);
        }
        .breadcrumb .sep {
            color: var(--border);
        }
        .breadcrumb .current {
            color: var(--primary);
            font-weight: 500;
        }
        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        .nav-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.85rem;
            transition: color 0.2s;
        }
        .nav-links a:hover {
            color: var(--primary);
        }

        /* CTA */
        .cta-section {
            margin-top: 50px;
            padding: 40px;
            background: linear-gradient(135deg, var(--bg-card), var(--bg));
            border-radius: 16px;
            border: 1px solid var(--border);
            text-align: center;
        }
        .cta-section h2 { margin-bottom: 15px; }
        .cta-section p { color: var(--text-muted); margin-bottom: 25px; }
        .cta-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .price-tag {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary);
            margin: 15px 0;
        }

        /* Test Result */
        .test-result {
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }
        .test-pass {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--secondary);
        }
        .test-fail {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
        }
        .test-list {
            list-style: none;
        }
        .test-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Footer */
        footer {
            margin-top: 50px;
            padding: 30px 0;
            border-top: 1px solid var(--border);
            text-align: center;
            color: var(--text-muted);
        }
        footer a { color: var(--primary); text-decoration: none; }
        footer .philosophy {
            color: #ffd700;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        footer .links {
            margin-top: 15px;
        }
        footer .links a {
            color: var(--text-muted);
            text-decoration: none;
            margin: 0 10px;
        }
        footer .links a:hover {
            color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 { font-size: 1.8rem; }
            .emotion-info { grid-template-columns: 1fr; }
            .tabs { justify-content: center; }
            .va-chart { width: 250px; height: 250px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Top Navigation -->
        <div class="top-nav">
            <div class="nav-left">
                <a href="https://wiastandards.com" class="nav-home">üíó WIA Standards</a>
                <div class="breadcrumb">
                    <a href="https://wiastandards.com">Home</a>
                    <span class="sep">‚Ä∫</span>
                    <a href="https://wiastandards.com/#standards">Standards</a>
                    <span class="sep">‚Ä∫</span>
                    <span class="current">Emotion AI</span>
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 25px;">
                <nav class="nav-links">
                    <a href="https://cert.wiastandards.com" target="_blank">üèÜ Certification</a>
                    <a href="https://wiabooks.store/reader/simulators/" target="_blank">üéÆ 109+ Simulators</a>
                    <a href="https://wiabooks.store" target="_blank">üìö Ebook</a>
                    <a href="https://github.com/WIA-Official/wia-standards" target="_blank">GitHub</a>
                </nav>
            </div>
        </div>

        <header>
            <div class="logo">üíó WIA Emotion AI</div>
            <div class="lang-switch">
                <button class="lang-btn active" onclick="setLang('en')">EN</button>
                <button class="lang-btn" onclick="setLang('ko')">KO</button>
            </div>
        </header>

        <section class="hero">
            <h1 data-en="Emotion AI Simulator" data-ko="Í∞êÏ†ï AI ÏãúÎÆ¨Î†àÏù¥ÌÑ∞"></h1>
            <p data-en="Interactive demo of WIA Emotion AI Standard for Affective Computing"
               data-ko="Ï†ïÏÑú Ïª¥Ìì®ÌåÖÏùÑ ÏúÑÌïú WIA Í∞êÏ†ï AI ÌëúÏ§Ä Ïù∏ÌÑ∞ÎûôÌã∞Î∏å Îç∞Î™®"></p>
        </section>

        <div class="tabs">
            <button class="tab active" onclick="showPanel('data')"
                    data-en="üìä Emotion Data" data-ko="üìä Í∞êÏ†ï Îç∞Ïù¥ÌÑ∞"></button>
            <button class="tab" onclick="showPanel('analysis')"
                    data-en="üî¢ Analysis" data-ko="üî¢ Î∂ÑÏÑù"></button>
            <button class="tab" onclick="showPanel('protocol')"
                    data-en="üì° Protocol" data-ko="üì° ÌîÑÎ°úÌÜ†ÏΩú"></button>
            <button class="tab" onclick="showPanel('integration')"
                    data-en="üîó Integration" data-ko="üîó ÌÜµÌï©"></button>
            <button class="tab" onclick="showPanel('test')"
                    data-en="üß™ Emotion Test" data-ko="üß™ Í∞êÏ†ï ÌÖåÏä§Ìä∏"></button>
        </div>

        <!-- Emotion Data Panel -->
        <div id="data" class="panel active">
            <h2 data-en="üìä Emotion Data Format" data-ko="üìä Í∞êÏ†ï Îç∞Ïù¥ÌÑ∞ ÌòïÏãù"></h2>

            <div class="form-row">
                <div class="form-group">
                    <label data-en="Modality" data-ko="Î™®Îã¨Î¶¨Ìã∞"></label>
                    <select id="modality">
                        <option value="facial" data-en="Facial Expression" data-ko="ÌëúÏ†ï">Facial Expression</option>
                        <option value="voice" data-en="Voice/Speech" data-ko="ÏùåÏÑ±/Î∞úÌôî">Voice/Speech</option>
                        <option value="text" data-en="Text Sentiment" data-ko="ÌÖçÏä§Ìä∏ Í∞êÏÑ±">Text Sentiment</option>
                        <option value="biosignal" data-en="Biosignal (HR, EDA, EEG)" data-ko="ÏÉùÏ≤¥Ïã†Ìò∏ (Ïã¨Î∞ï, ÌîºÎ∂ÄÏ†ÑÎèÑ, ÎáåÌåå)">Biosignal (HR, EDA, EEG)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-en="Subject ID" data-ko="ÌîºÌóòÏûê ID"></label>
                    <input type="text" id="subjectId" placeholder="user_12345">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label data-en="Primary Emotion" data-ko="Ï£ºÏöî Í∞êÏ†ï"></label>
                    <select id="primaryEmotion">
                        <option value="happiness">üòä Happiness (ÌñâÎ≥µ)</option>
                        <option value="sadness">üò¢ Sadness (Ïä¨Ìîî)</option>
                        <option value="anger">üò† Anger (Î∂ÑÎÖ∏)</option>
                        <option value="fear">üò® Fear (Í≥µÌè¨)</option>
                        <option value="disgust">ü§¢ Disgust (ÌòêÏò§)</option>
                        <option value="surprise">üòÆ Surprise (ÎÜÄÎûå)</option>
                        <option value="neutral">üòê Neutral (Ï§ëÎ¶Ω)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-en="Confidence (0-1)" data-ko="Ïã†Î¢∞ÎèÑ (0-1)"></label>
                    <input type="number" id="confidence" value="0.87" min="0" max="1" step="0.01">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label data-en="Valence (-1 to 1)" data-ko="Valence (-1 ~ 1)"></label>
                    <input type="number" id="valence" value="0.72" min="-1" max="1" step="0.01">
                </div>
                <div class="form-group">
                    <label data-en="Arousal (-1 to 1)" data-ko="Arousal (-1 ~ 1)"></label>
                    <input type="number" id="arousal" value="0.45" min="-1" max="1" step="0.01">
                </div>
            </div>

            <h3 style="margin: 30px 0 15px; color: var(--primary);" data-en="Action Units (FACS)" data-ko="Ïï°ÏÖò Ïú†Îãõ (FACS)"></h3>
            <div class="form-row">
                <div class="form-group">
                    <label>AU6 - Cheek Raiser (Î≥º Ïò¨Î¶º)</label>
                    <input type="range" id="au6" min="0" max="1" step="0.1" value="0.8" oninput="updateAU('au6', this.value)">
                    <span id="au6-val">0.8</span>
                </div>
                <div class="form-group">
                    <label>AU12 - Lip Corner Puller (ÏûÖÍº¨Î¶¨ Ïò¨Î¶º)</label>
                    <input type="range" id="au12" min="0" max="1" step="0.1" value="0.9" oninput="updateAU('au12', this.value)">
                    <span id="au12-val">0.9</span>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>AU1 - Inner Brow Raiser (ÏïàÏ™Ω ÎààÏçπ Ïò¨Î¶º)</label>
                    <input type="range" id="au1" min="0" max="1" step="0.1" value="0.3" oninput="updateAU('au1', this.value)">
                    <span id="au1-val">0.3</span>
                </div>
                <div class="form-group">
                    <label>AU4 - Brow Lowerer (ÎààÏçπ ÎÇ¥Î¶º)</label>
                    <input type="range" id="au4" min="0" max="1" step="0.1" value="0.1" oninput="updateAU('au4', this.value)">
                    <span id="au4-val">0.1</span>
                </div>
            </div>

            <button class="btn btn-primary" onclick="generateEmotionData()"
                    data-en="üíó Generate Emotion Data" data-ko="üíó Í∞êÏ†ï Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±"></button>

            <div class="signal-display" id="emotionOutput" style="display: none;"></div>
        </div>

        <!-- Analysis Panel -->
        <div id="analysis" class="panel">
            <h2 data-en="üî¢ Valence-Arousal Analysis" data-ko="üî¢ Valence-Arousal Î∂ÑÏÑù"></h2>

            <p style="margin-bottom: 20px; color: var(--text-muted);"
               data-en="The dimensional model represents emotions on Valence (positive/negative) and Arousal (high/low activation) axes."
               data-ko="Ï∞®Ïõê Î™®Îç∏ÏùÄ Valence(Í∏çÏ†ï/Î∂ÄÏ†ï)ÏôÄ Arousal(Í≥†Í∞ÅÏÑ±/Ï†ÄÍ∞ÅÏÑ±) Ï∂ïÏúºÎ°ú Í∞êÏ†ïÏùÑ ÌëúÌòÑÌï©ÎãàÎã§."></p>

            <div class="va-chart" id="vaChart">
                <div class="va-labels top" data-en="High Arousal" data-ko="Í≥†Í∞ÅÏÑ±">High Arousal</div>
                <div class="va-labels bottom" data-en="Low Arousal" data-ko="Ï†ÄÍ∞ÅÏÑ±">Low Arousal</div>
                <div class="va-labels left" data-en="Negative" data-ko="Î∂ÄÏ†ï">Negative</div>
                <div class="va-labels right" data-en="Positive" data-ko="Í∏çÏ†ï">Positive</div>
                <div class="va-point" id="vaPoint" style="left: 75%; top: 30%;"></div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label data-en="Valence Value (-1 to 1)" data-ko="Valence Í∞í (-1 ~ 1)"></label>
                    <input type="range" id="vaValence" min="-1" max="1" step="0.01" value="0.5" oninput="updateVAChart()">
                    <span id="vaValenceVal">0.50</span>
                </div>
                <div class="form-group">
                    <label data-en="Arousal Value (-1 to 1)" data-ko="Arousal Í∞í (-1 ~ 1)"></label>
                    <input type="range" id="vaArousal" min="-1" max="1" step="0.01" value="0.4" oninput="updateVAChart()">
                    <span id="vaArousalVal">0.40</span>
                </div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <h3 id="predictedEmotion" style="color: var(--primary);">Predicted: üòä Happiness (ÌñâÎ≥µ)</h3>
            </div>

            <h3 style="margin: 30px 0 15px; color: var(--primary);" data-en="Ekman's 6 Basic Emotions" data-ko="ÏóêÌÅ¨ÎßåÏùò 6Í∞ÄÏßÄ Í∏∞Î≥∏ Í∞êÏ†ï"></h3>

            <div class="emotion-grid">
                <div class="emotion-type-card active" onclick="selectEmotion('happiness')">
                    <div class="emoji">üòä</div>
                    <h4>Happiness</h4>
                    <p>ÌñâÎ≥µ</p>
                </div>
                <div class="emotion-type-card" onclick="selectEmotion('sadness')">
                    <div class="emoji">üò¢</div>
                    <h4>Sadness</h4>
                    <p>Ïä¨Ìîî</p>
                </div>
                <div class="emotion-type-card" onclick="selectEmotion('anger')">
                    <div class="emoji">üò†</div>
                    <h4>Anger</h4>
                    <p>Î∂ÑÎÖ∏</p>
                </div>
                <div class="emotion-type-card" onclick="selectEmotion('fear')">
                    <div class="emoji">üò®</div>
                    <h4>Fear</h4>
                    <p>Í≥µÌè¨</p>
                </div>
                <div class="emotion-type-card" onclick="selectEmotion('disgust')">
                    <div class="emoji">ü§¢</div>
                    <h4>Disgust</h4>
                    <p>ÌòêÏò§</p>
                </div>
                <div class="emotion-type-card" onclick="selectEmotion('surprise')">
                    <div class="emoji">üòÆ</div>
                    <h4>Surprise</h4>
                    <p>ÎÜÄÎûå</p>
                </div>
                <div class="emotion-type-card" onclick="selectEmotion('neutral')">
                    <div class="emoji">üòê</div>
                    <h4>Neutral</h4>
                    <p>Ï§ëÎ¶Ω</p>
                </div>
            </div>
        </div>

        <!-- Protocol Panel -->
        <div id="protocol" class="panel">
            <h2 data-en="üì° Real-time Streaming Protocol" data-ko="üì° Ïã§ÏãúÍ∞Ñ Ïä§Ìä∏Î¶¨Î∞ç ÌîÑÎ°úÌÜ†ÏΩú"></h2>

            <p style="margin-bottom: 20px; color: var(--text-muted);"
               data-en="WIA Emotion AI supports real-time emotion streaming via WebSocket for continuous affective computing."
               data-ko="WIA Í∞êÏ†ï AIÎäî ÏßÄÏÜçÏ†ÅÏù∏ Ï†ïÏÑú Ïª¥Ìì®ÌåÖÏùÑ ÏúÑÌïú WebSocket Í∏∞Î∞ò Ïã§ÏãúÍ∞Ñ Í∞êÏ†ï Ïä§Ìä∏Î¶¨Î∞çÏùÑ ÏßÄÏõêÌï©ÎãàÎã§."></p>

            <div class="emotion-card">
                <div class="emotion-header">
                    <div>
                        <div class="emotion-title">WIA EMOTION STREAM</div>
                        <div class="emotion-id" id="streamId">STREAM-2025-XXXX</div>
                    </div>
                    <div class="emotion-status status-positive" id="streamStatus"
                         data-en="STREAMING" data-ko="Ïä§Ìä∏Î¶¨Î∞ç Ï§ë">STREAMING</div>
                </div>

                <div class="emotion-info">
                    <div class="info-item">
                        <label data-en="ENDPOINT" data-ko="ÏóîÎìúÌè¨Ïù∏Ìä∏">ENDPOINT</label>
                        <span>wss://api.wia.live/emotion/v1/stream</span>
                    </div>
                    <div class="info-item">
                        <label data-en="PROTOCOL" data-ko="ÌîÑÎ°úÌÜ†ÏΩú">PROTOCOL</label>
                        <span>WebSocket + JSON</span>
                    </div>
                    <div class="info-item">
                        <label data-en="SAMPLE RATE" data-ko="ÏÉòÌîå Î†àÏù¥Ìä∏">SAMPLE RATE</label>
                        <span id="sampleRate">30 fps</span>
                    </div>
                    <div class="info-item">
                        <label data-en="LATENCY" data-ko="ÏßÄÏó∞ÏãúÍ∞Ñ">LATENCY</label>
                        <span id="latency">45ms</span>
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label data-en="Stream Mode" data-ko="Ïä§Ìä∏Î¶º Î™®Îìú"></label>
                    <select id="streamMode">
                        <option value="continuous" data-en="Continuous" data-ko="Ïó∞ÏÜç">Continuous</option>
                        <option value="event" data-en="Event-based" data-ko="Ïù¥Î≤§Ìä∏ Í∏∞Î∞ò">Event-based</option>
                        <option value="polling" data-en="Polling" data-ko="Ìè¥ÎßÅ">Polling</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-en="Frame Rate" data-ko="ÌîÑÎ†àÏûÑ Î†àÏù¥Ìä∏"></label>
                    <select id="frameRate">
                        <option value="15">15 fps</option>
                        <option value="30" selected>30 fps</option>
                        <option value="60">60 fps</option>
                    </select>
                </div>
            </div>

            <button class="btn btn-primary" onclick="startStream()"
                    data-en="‚ñ∂Ô∏è Start Stream" data-ko="‚ñ∂Ô∏è Ïä§Ìä∏Î¶º ÏãúÏûë"></button>
            <button class="btn btn-outline" onclick="stopStream()"
                    data-en="‚èπÔ∏è Stop Stream" data-ko="‚èπÔ∏è Ïä§Ìä∏Î¶º Ï§ëÏßÄ"></button>

            <h3 style="margin: 30px 0 15px; color: var(--primary);" data-en="Live Stream Data" data-ko="Ïã§ÏãúÍ∞Ñ Ïä§Ìä∏Î¶º Îç∞Ïù¥ÌÑ∞"></h3>
            <div class="signal-display" id="streamOutput">
// Waiting for stream...
// Ïä§Ìä∏Î¶º ÎåÄÍ∏∞ Ï§ë...
            </div>
        </div>

        <!-- Integration Panel -->
        <div id="integration" class="panel">
            <h2 data-en="üîó Multimodal Integration" data-ko="üîó Î©ÄÌã∞Î™®Îã¨ ÌÜµÌï©"></h2>

            <p style="margin-bottom: 20px; color: var(--text-muted);"
               data-en="Combine multiple modalities (face, voice, text, biosignals) for more accurate emotion recognition."
               data-ko="Îçî Ï†ïÌôïÌïú Í∞êÏ†ï Ïù∏ÏãùÏùÑ ÏúÑÌï¥ Ïó¨Îü¨ Î™®Îã¨Î¶¨Ìã∞(ÏñºÍµ¥, ÏùåÏÑ±, ÌÖçÏä§Ìä∏, ÏÉùÏ≤¥Ïã†Ìò∏)Î•º Í≤∞Ìï©Ìï©ÎãàÎã§."></p>

            <div class="emotion-grid">
                <div class="emotion-type-card active" onclick="toggleModality('face')">
                    <div class="emoji">üòä</div>
                    <h4>Facial</h4>
                    <p data-en="Expression Analysis" data-ko="ÌëúÏ†ï Î∂ÑÏÑù">Expression Analysis</p>
                </div>
                <div class="emotion-type-card active" onclick="toggleModality('voice')">
                    <div class="emoji">üé§</div>
                    <h4>Voice</h4>
                    <p data-en="Prosody Analysis" data-ko="Ïö¥Ïú® Î∂ÑÏÑù">Prosody Analysis</p>
                </div>
                <div class="emotion-type-card" onclick="toggleModality('text')">
                    <div class="emoji">üìù</div>
                    <h4>Text</h4>
                    <p data-en="Sentiment Analysis" data-ko="Í∞êÏÑ± Î∂ÑÏÑù">Sentiment Analysis</p>
                </div>
                <div class="emotion-type-card" onclick="toggleModality('bio')">
                    <div class="emoji">üíì</div>
                    <h4>Biosignal</h4>
                    <p data-en="HR, EDA, EEG" data-ko="Ïã¨Î∞ï, ÌîºÎ∂ÄÏ†ÑÎèÑ, ÎáåÌåå">HR, EDA, EEG</p>
                </div>
            </div>

            <h3 style="margin: 30px 0 15px; color: var(--primary);" data-en="Integration Scenarios" data-ko="ÌÜµÌï© ÏãúÎÇòÎ¶¨Ïò§"></h3>

            <table class="au-table">
                <thead>
                    <tr>
                        <th data-en="Use Case" data-ko="ÌôúÏö© ÏÇ¨Î°Ä">Use Case</th>
                        <th data-en="Modalities" data-ko="Î™®Îã¨Î¶¨Ìã∞">Modalities</th>
                        <th data-en="Application" data-ko="ÏùëÏö© Î∂ÑÏïº">Application</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td data-en="Mental Health Monitoring" data-ko="Ï†ïÏã†Í±¥Í∞ï Î™®ÎãàÌÑ∞ÎßÅ">Mental Health Monitoring</td>
                        <td>Face + Voice + Bio</td>
                        <td data-en="Depression/Anxiety Detection" data-ko="Ïö∞Ïö∏Ï¶ù/Î∂àÏïà Í∞êÏßÄ">Depression/Anxiety Detection</td>
                    </tr>
                    <tr>
                        <td data-en="Customer Experience" data-ko="Í≥†Í∞ù Í≤ΩÌóò">Customer Experience</td>
                        <td>Face + Voice + Text</td>
                        <td data-en="Sentiment Tracking" data-ko="Í∞êÏ†ï Ï∂îÏ†Å">Sentiment Tracking</td>
                    </tr>
                    <tr>
                        <td data-en="E-Learning" data-ko="Ïù¥Îü¨Îãù">E-Learning</td>
                        <td>Face + Bio</td>
                        <td data-en="Engagement/Confusion Detection" data-ko="ÏßëÏ§ëÎèÑ/ÌòºÎûÄ Í∞êÏßÄ">Engagement/Confusion Detection</td>
                    </tr>
                    <tr>
                        <td data-en="Automotive Safety" data-ko="ÏûêÎèôÏ∞® ÏïàÏ†Ñ">Automotive Safety</td>
                        <td>Face + Bio</td>
                        <td data-en="Drowsiness/Anger Detection" data-ko="Ï°∏Ïùå/Î∂ÑÎÖ∏ Í∞êÏßÄ">Drowsiness/Anger Detection</td>
                    </tr>
                    <tr>
                        <td data-en="Gaming/XR" data-ko="Í≤åÏûÑ/XR">Gaming/XR</td>
                        <td>Face + Voice + Bio</td>
                        <td data-en="Immersive Experience" data-ko="Î™∞ÏûÖÌòï Í≤ΩÌóò">Immersive Experience</td>
                    </tr>
                </tbody>
            </table>

            <button class="btn btn-primary" onclick="runFusion()" style="margin-top: 20px;"
                    data-en="üîó Run Multimodal Fusion" data-ko="üîó Î©ÄÌã∞Î™®Îã¨ ÏúµÌï© Ïã§Ìñâ"></button>

            <div class="signal-display" id="fusionOutput" style="display: none;"></div>
        </div>

        <!-- Emotion Test Panel -->
        <div id="test" class="panel">
            <h2 data-en="üß™ Emotion Recognition Test" data-ko="üß™ Í∞êÏ†ï Ïù∏Ïãù ÌÖåÏä§Ìä∏"></h2>

            <p style="margin-bottom: 20px; color: var(--text-muted);"
               data-en="Test your WIA Emotion AI implementation for accuracy and compliance."
               data-ko="WIA Í∞êÏ†ï AI Íµ¨ÌòÑÏùò Ï†ïÌôïÎèÑÏôÄ Í∑úÏ†ï Ï§ÄÏàòÎ•º ÌÖåÏä§Ìä∏Ìï©ÎãàÎã§."></p>

            <div class="form-row">
                <div class="form-group">
                    <label data-en="Test Dataset" data-ko="ÌÖåÏä§Ìä∏ Îç∞Ïù¥ÌÑ∞ÏÖã"></label>
                    <select id="testDataset">
                        <option value="fer2013">FER2013</option>
                        <option value="affectnet">AffectNet</option>
                        <option value="rafdb">RAF-DB</option>
                        <option value="custom">Custom Dataset</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-en="Model Version" data-ko="Î™®Îç∏ Î≤ÑÏ†Ñ"></label>
                    <select id="modelVersion">
                        <option value="2.1.0">v2.1.0 (Latest)</option>
                        <option value="2.0.0">v2.0.0</option>
                        <option value="1.5.0">v1.5.0</option>
                    </select>
                </div>
            </div>

            <button class="btn btn-primary" onclick="runEmotionTest()"
                    data-en="üß™ Run Accuracy Test" data-ko="üß™ Ï†ïÌôïÎèÑ ÌÖåÏä§Ìä∏ Ïã§Ìñâ"></button>

            <div id="testResult" class="test-result test-pass" style="display: none;">
                <h3 id="testTitle" data-en="‚úÖ Test Passed" data-ko="‚úÖ ÌÖåÏä§Ìä∏ ÌÜµÍ≥º"></h3>
                <p id="testDesc" data-en="Model meets WIA Emotion AI accuracy requirements."
                   data-ko="Î™®Îç∏Ïù¥ WIA Í∞êÏ†ï AI Ï†ïÌôïÎèÑ ÏöîÍµ¨ÏÇ¨Ìï≠ÏùÑ Ï∂©Ï°±Ìï©ÎãàÎã§."></p>

                <ul class="test-list" id="testList">
                    <li><span style="color: var(--secondary);">‚úÖ</span> <span data-en="Happiness: 92.3% accuracy" data-ko="ÌñâÎ≥µ: 92.3% Ï†ïÌôïÎèÑ">Happiness: 92.3% accuracy</span></li>
                    <li><span style="color: var(--secondary);">‚úÖ</span> <span data-en="Sadness: 87.1% accuracy" data-ko="Ïä¨Ìîî: 87.1% Ï†ïÌôïÎèÑ">Sadness: 87.1% accuracy</span></li>
                    <li><span style="color: var(--secondary);">‚úÖ</span> <span data-en="Anger: 84.5% accuracy" data-ko="Î∂ÑÎÖ∏: 84.5% Ï†ïÌôïÎèÑ">Anger: 84.5% accuracy</span></li>
                    <li><span style="color: var(--secondary);">‚úÖ</span> <span data-en="Fear: 79.2% accuracy" data-ko="Í≥µÌè¨: 79.2% Ï†ïÌôïÎèÑ">Fear: 79.2% accuracy</span></li>
                    <li><span style="color: var(--secondary);">‚úÖ</span> <span data-en="Disgust: 76.8% accuracy" data-ko="ÌòêÏò§: 76.8% Ï†ïÌôïÎèÑ">Disgust: 76.8% accuracy</span></li>
                    <li><span style="color: var(--secondary);">‚úÖ</span> <span data-en="Surprise: 88.9% accuracy" data-ko="ÎÜÄÎûå: 88.9% Ï†ïÌôïÎèÑ">Surprise: 88.9% accuracy</span></li>
                    <li><span style="color: var(--secondary);">‚úÖ</span> <span data-en="Neutral: 91.5% accuracy" data-ko="Ï§ëÎ¶Ω: 91.5% Ï†ïÌôïÎèÑ">Neutral: 91.5% accuracy</span></li>
                </ul>

                <div style="margin-top: 20px; padding: 15px; background: var(--bg); border-radius: 8px;">
                    <strong data-en="Overall Accuracy: 85.8%" data-ko="Ï†ÑÏ≤¥ Ï†ïÌôïÎèÑ: 85.8%">Overall Accuracy: 85.8%</strong>
                    <br><span style="color: var(--text-muted);" data-en="WIA Certification Threshold: 75%" data-ko="WIA Ïù∏Ï¶ù ÏûÑÍ≥ÑÍ∞í: 75%">WIA Certification Threshold: 75%</span>
                </div>
            </div>

            <h3 style="margin: 30px 0 15px; color: var(--primary);" data-en="Action Unit Accuracy" data-ko="Ïï°ÏÖò Ïú†Îãõ Ï†ïÌôïÎèÑ"></h3>
            <table class="au-table">
                <thead>
                    <tr>
                        <th>AU Code</th>
                        <th data-en="Name" data-ko="Ïù¥Î¶Ñ">Name</th>
                        <th data-en="Accuracy" data-ko="Ï†ïÌôïÎèÑ">Accuracy</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>AU1</td>
                        <td>Inner Brow Raiser (ÏïàÏ™Ω ÎààÏçπ Ïò¨Î¶º)</td>
                        <td><div class="au-intensity"><div class="au-intensity-bar" style="width: 88%;"></div></div> 88%</td>
                    </tr>
                    <tr>
                        <td>AU4</td>
                        <td>Brow Lowerer (ÎààÏçπ ÎÇ¥Î¶º)</td>
                        <td><div class="au-intensity"><div class="au-intensity-bar" style="width: 85%;"></div></div> 85%</td>
                    </tr>
                    <tr>
                        <td>AU6</td>
                        <td>Cheek Raiser (Î≥º Ïò¨Î¶º)</td>
                        <td><div class="au-intensity"><div class="au-intensity-bar" style="width: 91%;"></div></div> 91%</td>
                    </tr>
                    <tr>
                        <td>AU12</td>
                        <td>Lip Corner Puller (ÏûÖÍº¨Î¶¨ Ïò¨Î¶º)</td>
                        <td><div class="au-intensity"><div class="au-intensity-bar" style="width: 93%;"></div></div> 93%</td>
                    </tr>
                    <tr>
                        <td>AU15</td>
                        <td>Lip Corner Depressor (ÏûÖÍº¨Î¶¨ ÎÇ¥Î¶º)</td>
                        <td><div class="au-intensity"><div class="au-intensity-bar" style="width: 82%;"></div></div> 82%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- CTA Section -->
        <section class="cta-section">
            <h2 data-en="Master the WIA Emotion AI Standard"
                data-ko="WIA Í∞êÏ†ï AI ÌëúÏ§Ä ÎßàÏä§ÌÑ∞ÌïòÍ∏∞"></h2>
            <p data-en="Get the official ebook with complete specifications, implementation guides, and certification preparation materials for Affective Computing."
               data-ko="Ï†ïÏÑú Ïª¥Ìì®ÌåÖÏùÑ ÏúÑÌïú ÏôÑÏ†ÑÌïú ÏÇ¨Ïñë, Íµ¨ÌòÑ Í∞ÄÏù¥Îìú Î∞è Ïù∏Ï¶ù Ï§ÄÎπÑ ÏûêÎ£åÍ∞Ä Ìè¨Ìï®Îêú Í≥µÏãù Ï†ÑÏûêÏ±ÖÏùÑ Î∞õÏúºÏÑ∏Ïöî."></p>

            <div class="price-tag">$99 USD</div>

            <div class="cta-buttons">
                <a href="../ebook/en/" class="btn btn-primary"
                   data-en="üìö Get the Ebook" data-ko="üìö Ï†ÑÏûêÏ±Ö Íµ¨Îß§"></a>
                <a href="https://cert.wiastandards.com" target="_blank"
                   class="btn btn-secondary"
                   data-en="üèÜ Get Certified" data-ko="üèÜ Ïù∏Ï¶ù Î∞õÍ∏∞"></a>
            </div>
        </section>

        <footer>
            <p class="philosophy" data-en="ÂºòÁõä‰∫∫Èñì ¬∑ Benefit All Humanity" data-ko="ÂºòÁõä‰∫∫Èñì ¬∑ ÎÑêÎ¶¨ Ïù∏Í∞ÑÏùÑ Ïù¥Î°≠Í≤å ÌïòÎùº">ÂºòÁõä‰∫∫Èñì ¬∑ Benefit All Humanity</p>
            <p data-en="Understanding emotions to enhance human connection" data-ko="Ïù∏Í∞Ñ Ïó∞Í≤∞ÏùÑ Í∞ïÌôîÌïòÍ∏∞ ÏúÑÌïú Í∞êÏ†ï Ïù¥Ìï¥">Understanding emotions to enhance human connection</p>
            <p style="margin-top: 15px;">WIA - World Certification Industry Association</p>
            <div class="links">
                <a href="https://wiastandards.com" target="_blank" data-en="üè† Home" data-ko="üè† Ìôà">üè† Home</a>
                <a href="https://wiastandards.com/#standards" target="_blank" data-en="üìã All Standards" data-ko="üìã Ï†ÑÏ≤¥ ÌëúÏ§Ä">üìã All Standards</a>
                <a href="https://wiabooks.store" target="_blank" data-en="üìö Ebook" data-ko="üìö Ï†ÑÏûêÏ±Ö">üìö Ebook</a>
                <a href="https://github.com/WIA-Official/wia-standards" target="_blank">GitHub</a>
            </div>
        </footer>
    </div>

    <script>
        let currentLang = 'en';
        let emotionData = null;
        let streamInterval = null;

        function setLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            document.querySelectorAll('[data-en]').forEach(el => {
                if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                    el.placeholder = el.getAttribute('data-' + lang) || el.getAttribute('data-en');
                } else if (el.tagName === 'OPTION') {
                    el.textContent = el.getAttribute('data-' + lang) || el.getAttribute('data-en');
                } else {
                    el.textContent = el.getAttribute('data-' + lang) || el.getAttribute('data-en');
                }
            });
        }

        function showPanel(panelId) {
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(panelId).classList.add('active');
            event.target.classList.add('active');
        }

        function updateAU(id, value) {
            document.getElementById(id + '-val').textContent = value;
        }

        function generateEmotionId() {
            const random = Math.random().toString(36).substr(2, 8).toUpperCase();
            return `EMO-${random}`;
        }

        function generateEmotionData() {
            const modality = document.getElementById('modality').value;
            const subjectId = document.getElementById('subjectId').value || 'user_12345';
            const primaryEmotion = document.getElementById('primaryEmotion').value;
            const confidence = parseFloat(document.getElementById('confidence').value);
            const valence = parseFloat(document.getElementById('valence').value);
            const arousal = parseFloat(document.getElementById('arousal').value);

            emotionData = {
                format: "WIA-EMOTION-AI-v1.0",
                timestamp: new Date().toISOString(),
                subject_id: subjectId,
                modality: modality,
                emotions: {
                    primary: {
                        label: primaryEmotion,
                        confidence: confidence
                    },
                    secondary: {
                        label: getSecondaryEmotion(primaryEmotion),
                        confidence: Math.max(0, confidence - 0.4 - Math.random() * 0.2).toFixed(2)
                    }
                },
                dimensions: {
                    valence: valence,
                    arousal: arousal
                },
                action_units: [
                    { au: "AU1", intensity: parseFloat(document.getElementById('au1').value), name: "Inner Brow Raiser" },
                    { au: "AU4", intensity: parseFloat(document.getElementById('au4').value), name: "Brow Lowerer" },
                    { au: "AU6", intensity: parseFloat(document.getElementById('au6').value), name: "Cheek Raiser" },
                    { au: "AU12", intensity: parseFloat(document.getElementById('au12').value), name: "Lip Corner Puller" }
                ],
                metadata: {
                    model_version: "2.1.0",
                    processing_time_ms: Math.floor(Math.random() * 30 + 30)
                }
            };

            const output = document.getElementById('emotionOutput');
            output.style.display = 'block';
            output.textContent = JSON.stringify(emotionData, null, 2);

            alert(currentLang === 'en' ?
                'Emotion data generated successfully!' :
                'Í∞êÏ†ï Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!');
        }

        function getSecondaryEmotion(primary) {
            const emotions = ['happiness', 'sadness', 'anger', 'fear', 'disgust', 'surprise', 'neutral'];
            const filtered = emotions.filter(e => e !== primary);
            return filtered[Math.floor(Math.random() * filtered.length)];
        }

        function updateVAChart() {
            const valence = parseFloat(document.getElementById('vaValence').value);
            const arousal = parseFloat(document.getElementById('vaArousal').value);

            document.getElementById('vaValenceVal').textContent = valence.toFixed(2);
            document.getElementById('vaArousalVal').textContent = arousal.toFixed(2);

            // Map valence/arousal to chart position
            const x = ((valence + 1) / 2) * 100;
            const y = ((1 - arousal) / 2) * 100;

            document.getElementById('vaPoint').style.left = x + '%';
            document.getElementById('vaPoint').style.top = y + '%';

            // Predict emotion from V-A space
            const emotion = predictEmotionFromVA(valence, arousal);
            document.getElementById('predictedEmotion').textContent = `Predicted: ${emotion.emoji} ${emotion.en} (${emotion.ko})`;
        }

        function predictEmotionFromVA(v, a) {
            if (v > 0.3 && a > 0.3) return { emoji: 'üòä', en: 'Happiness', ko: 'ÌñâÎ≥µ' };
            if (v > 0.3 && a > -0.3) return { emoji: 'üòå', en: 'Content', ko: 'ÎßåÏ°±' };
            if (v > 0.3 && a < -0.3) return { emoji: 'üò¥', en: 'Relaxed', ko: 'Ìé∏ÏïàÌï®' };
            if (v < -0.3 && a > 0.3) return { emoji: 'üò†', en: 'Anger', ko: 'Î∂ÑÎÖ∏' };
            if (v < -0.3 && a > -0.3) return { emoji: 'üò¢', en: 'Sadness', ko: 'Ïä¨Ìîî' };
            if (v < -0.3 && a < -0.3) return { emoji: 'üòî', en: 'Depressed', ko: 'Ïö∞Ïö∏' };
            if (a > 0.5) return { emoji: 'üòÆ', en: 'Surprise', ko: 'ÎÜÄÎûå' };
            if (a < -0.5) return { emoji: 'üòê', en: 'Bored', ko: 'ÏßÄÎ£®Ìï®' };
            return { emoji: 'üòê', en: 'Neutral', ko: 'Ï§ëÎ¶Ω' };
        }

        function selectEmotion(emotion) {
            document.querySelectorAll('.emotion-grid .emotion-type-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            // Update primary emotion dropdown
            document.getElementById('primaryEmotion').value = emotion;

            // Set typical V-A values for this emotion
            const vaMap = {
                happiness: { v: 0.7, a: 0.5 },
                sadness: { v: -0.6, a: -0.3 },
                anger: { v: -0.5, a: 0.7 },
                fear: { v: -0.4, a: 0.6 },
                disgust: { v: -0.5, a: 0.2 },
                surprise: { v: 0.1, a: 0.8 },
                neutral: { v: 0, a: 0 }
            };

            const va = vaMap[emotion] || { v: 0, a: 0 };
            document.getElementById('vaValence').value = va.v;
            document.getElementById('vaArousal').value = va.a;
            updateVAChart();
        }

        function startStream() {
            const streamId = 'STREAM-' + Date.now().toString(36).toUpperCase();
            document.getElementById('streamId').textContent = streamId;
            document.getElementById('streamStatus').textContent = currentLang === 'en' ? 'STREAMING' : 'Ïä§Ìä∏Î¶¨Î∞ç Ï§ë';
            document.getElementById('streamStatus').className = 'emotion-status status-positive';

            const output = document.getElementById('streamOutput');
            let frameCount = 0;

            streamInterval = setInterval(() => {
                frameCount++;
                const data = {
                    frame: frameCount,
                    timestamp: new Date().toISOString(),
                    emotion: {
                        primary: ['happiness', 'neutral', 'surprise'][Math.floor(Math.random() * 3)],
                        confidence: (0.7 + Math.random() * 0.3).toFixed(2)
                    },
                    valence: (Math.random() * 2 - 1).toFixed(2),
                    arousal: (Math.random() * 2 - 1).toFixed(2)
                };
                output.textContent = JSON.stringify(data, null, 2);
                document.getElementById('latency').textContent = Math.floor(30 + Math.random() * 30) + 'ms';
            }, 1000 / parseInt(document.getElementById('frameRate').value));

            alert(currentLang === 'en' ?
                'Stream started!' :
                'Ïä§Ìä∏Î¶ºÏù¥ ÏãúÏûëÎêòÏóàÏäµÎãàÎã§!');
        }

        function stopStream() {
            if (streamInterval) {
                clearInterval(streamInterval);
                streamInterval = null;
            }
            document.getElementById('streamStatus').textContent = currentLang === 'en' ? 'STOPPED' : 'Ï§ëÏßÄÎê®';
            document.getElementById('streamStatus').className = 'emotion-status status-neutral';

            alert(currentLang === 'en' ?
                'Stream stopped.' :
                'Ïä§Ìä∏Î¶ºÏù¥ Ï§ëÏßÄÎêòÏóàÏäµÎãàÎã§.');
        }

        function toggleModality(modality) {
            event.currentTarget.classList.toggle('active');
        }

        function runFusion() {
            const activeModalities = [];
            document.querySelectorAll('#integration .emotion-type-card.active').forEach(card => {
                activeModalities.push(card.querySelector('h4').textContent);
            });

            const fusionResult = {
                fusion_id: 'FUSION-' + Date.now().toString(36).toUpperCase(),
                timestamp: new Date().toISOString(),
                modalities: activeModalities,
                fusion_method: "weighted_average",
                result: {
                    emotion: "happiness",
                    confidence: 0.91,
                    valence: 0.68,
                    arousal: 0.42
                },
                modality_weights: activeModalities.reduce((acc, m) => {
                    acc[m.toLowerCase()] = (1 / activeModalities.length).toFixed(2);
                    return acc;
                }, {}),
                processing_time_ms: 78
            };

            const output = document.getElementById('fusionOutput');
            output.style.display = 'block';
            output.textContent = JSON.stringify(fusionResult, null, 2);

            alert(currentLang === 'en' ?
                `Multimodal fusion completed with ${activeModalities.length} modalities!` :
                `${activeModalities.length}Í∞ú Î™®Îã¨Î¶¨Ìã∞Î°ú Î©ÄÌã∞Î™®Îã¨ ÏúµÌï© ÏôÑÎ£å!`);
        }

        function runEmotionTest() {
            const result = document.getElementById('testResult');
            result.style.display = 'block';
            result.className = 'test-result test-pass';
            setLang(currentLang);

            alert(currentLang === 'en' ?
                'Test completed successfully!' :
                'ÌÖåÏä§Ìä∏Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setLang('en');
            updateVAChart();
        });
    </script>
</body>
</html>
