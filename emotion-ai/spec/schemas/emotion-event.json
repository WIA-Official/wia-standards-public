{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://wiastandards.com/schemas/emotion-ai/v1/emotion-event.json",
    "title": "WIA Emotion Event",
    "description": "Standardized emotion event data format",
    "type": "object",
    "required": ["event_id", "timestamp", "version", "emotions"],
    "properties": {
        "event_id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the event (UUID v4)"
        },
        "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of emotion detection"
        },
        "version": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+$",
            "description": "Schema version (SemVer format)"
        },
        "session_id": {
            "type": "string",
            "description": "Optional session identifier for grouping events"
        },
        "subject_id": {
            "type": "string",
            "description": "Anonymized subject identifier"
        },
        "emotions": {
            "type": "array",
            "items": { "$ref": "#/$defs/Emotion" },
            "minItems": 1,
            "description": "Array of detected emotions"
        },
        "action_units": {
            "type": "array",
            "items": { "$ref": "#/$defs/ActionUnit" },
            "description": "FACS Action Unit data"
        },
        "dimensional": {
            "$ref": "#/$defs/DimensionalModel"
        },
        "modalities": {
            "type": "array",
            "items": { "$ref": "#/$defs/Modality" }
        },
        "metadata": {
            "$ref": "#/$defs/Metadata"
        }
    },
    "$defs": {
        "Emotion": {
            "type": "object",
            "required": ["category", "intensity", "confidence"],
            "properties": {
                "category": {
                    "type": "string",
                    "enum": [
                        "happiness", "sadness", "anger", "fear",
                        "disgust", "surprise", "neutral", "contempt",
                        "confusion", "interest", "boredom", "frustration",
                        "excitement", "anxiety"
                    ]
                },
                "intensity": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "confidence": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "onset_time": { "type": "number" },
                "apex_time": { "type": "number" },
                "offset_time": { "type": "number" },
                "source_modality": {
                    "type": "string",
                    "enum": ["facial", "voice", "text", "biosignal", "multimodal"]
                }
            }
        },
        "ActionUnit": {
            "type": "object",
            "required": ["au", "intensity"],
            "properties": {
                "au": {
                    "type": "string",
                    "pattern": "^AU\\d{1,2}[LRAB]?$"
                },
                "name": { "type": "string" },
                "intensity": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "intensity_label": {
                    "type": "string",
                    "enum": ["A", "B", "C", "D", "E"]
                },
                "confidence": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "symmetric": { "type": "boolean" }
            }
        },
        "DimensionalModel": {
            "type": "object",
            "properties": {
                "valence": {
                    "type": "number",
                    "minimum": -1.0,
                    "maximum": 1.0
                },
                "arousal": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "dominance": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                }
            }
        },
        "Modality": {
            "type": "object",
            "required": ["type", "confidence"],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": ["facial", "voice", "text", "biosignal"]
                },
                "confidence": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "weight": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                },
                "data": { "type": "object" }
            }
        },
        "Metadata": {
            "type": "object",
            "properties": {
                "provider": { "type": "string" },
                "model_version": { "type": "string" },
                "processing_time_ms": { "type": "integer" },
                "cultural_context": { "type": "string" }
            }
        }
    }
}
