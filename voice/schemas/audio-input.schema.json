{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia-standards.org/voice/schemas/audio-input.schema.json",
  "title": "AudioInput",
  "description": "Audio input data for voice-to-sign translation",
  "type": "object",
  "required": ["audio_id", "timestamp", "format", "sample_rate", "channels", "bit_depth", "duration_ms"],
  "properties": {
    "audio_id": {
      "type": "string",
      "description": "Unique identifier for the audio input",
      "pattern": "^[a-zA-Z0-9_-]+$"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of audio capture"
    },
    "format": {
      "type": "string",
      "enum": ["wav", "pcm", "flac", "ogg", "mp3", "webm"],
      "description": "Audio file format"
    },
    "sample_rate": {
      "type": "integer",
      "enum": [8000, 16000, 22050, 44100, 48000],
      "description": "Sample rate in Hz"
    },
    "channels": {
      "type": "integer",
      "minimum": 1,
      "maximum": 8,
      "description": "Number of audio channels (1=mono, 2=stereo)"
    },
    "bit_depth": {
      "type": "integer",
      "enum": [16, 24, 32],
      "description": "Bit depth per sample"
    },
    "duration_ms": {
      "type": "number",
      "minimum": 0,
      "maximum": 3600000,
      "description": "Duration in milliseconds"
    },
    "source": {
      "$ref": "#/$defs/AudioSource"
    },
    "language_hint": {
      "type": "string",
      "pattern": "^[a-z]{2}$",
      "description": "ISO 639-1 language hint"
    },
    "data": {
      "type": "string",
      "contentEncoding": "base64",
      "description": "Base64 encoded audio data"
    },
    "data_url": {
      "type": "string",
      "format": "uri",
      "description": "URL to audio data"
    }
  },
  "$defs": {
    "AudioSource": {
      "type": "object",
      "properties": {
        "device_id": {
          "type": "string"
        },
        "device_name": {
          "type": "string"
        },
        "location": {
          "$ref": "#/$defs/GeoLocation"
        }
      }
    },
    "GeoLocation": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "longitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180
        },
        "accuracy_m": {
          "type": "number",
          "minimum": 0
        }
      },
      "required": ["latitude", "longitude"]
    }
  }
}
