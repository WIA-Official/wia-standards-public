{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/climate/data/v1/vertical-farming.schema.json",
  "title": "WIA Climate - Vertical Farming Data",
  "description": "Schema for vertical farming and controlled environment agriculture data",
  "definitions": {
    "verticalFarmingData": {
      "type": "object",
      "required": ["system_type", "environment", "lighting", "nutrient_solution"],
      "properties": {
        "system_type": {
          "type": "string",
          "enum": ["hydroponics", "aeroponics", "aquaponics", "substrate", "hybrid"],
          "description": "Cultivation system type"
        },
        "environment": {
          "type": "object",
          "required": ["temperature_celsius", "humidity_percentage"],
          "properties": {
            "temperature_celsius": {
              "type": "number",
              "description": "Air temperature in Celsius"
            },
            "humidity_percentage": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "Relative humidity percentage"
            },
            "co2_ppm": {
              "type": "number",
              "minimum": 0,
              "description": "CO2 concentration in ppm"
            },
            "vpd_kpa": {
              "type": "number",
              "minimum": 0,
              "description": "Vapor Pressure Deficit in kPa"
            },
            "air_flow_m3_per_hour": {
              "type": "number",
              "minimum": 0,
              "description": "Air flow rate in m³/hour"
            }
          },
          "additionalProperties": true
        },
        "lighting": {
          "type": "object",
          "required": ["ppfd_umol_per_m2_s", "photoperiod_hours"],
          "properties": {
            "type": {
              "type": "string",
              "enum": ["led", "hps", "fluorescent", "metal_halide", "hybrid"],
              "description": "Light source type"
            },
            "ppfd_umol_per_m2_s": {
              "type": "number",
              "minimum": 0,
              "description": "Photosynthetic Photon Flux Density in µmol/m²/s"
            },
            "dli_mol_per_m2_day": {
              "type": "number",
              "minimum": 0,
              "description": "Daily Light Integral in mol/m²/day"
            },
            "spectrum": {
              "type": "string",
              "enum": ["full_spectrum", "red_blue", "warm_white", "cool_white", "custom"],
              "description": "Light spectrum type"
            },
            "photoperiod_hours": {
              "type": "number",
              "minimum": 0,
              "maximum": 24,
              "description": "Photoperiod in hours"
            },
            "energy_consumption_kwh": {
              "type": "number",
              "minimum": 0,
              "description": "Energy consumption in kWh"
            }
          },
          "additionalProperties": true
        },
        "nutrient_solution": {
          "type": "object",
          "required": ["ph", "ec_ms_per_cm"],
          "properties": {
            "ph": {
              "type": "number",
              "minimum": 0,
              "maximum": 14,
              "description": "Solution pH"
            },
            "ec_ms_per_cm": {
              "type": "number",
              "minimum": 0,
              "description": "Electrical conductivity in mS/cm"
            },
            "temperature_celsius": {
              "type": "number",
              "description": "Solution temperature in Celsius"
            },
            "dissolved_oxygen_mg_per_l": {
              "type": "number",
              "minimum": 0,
              "description": "Dissolved oxygen in mg/L"
            },
            "elements": {
              "type": "object",
              "properties": {
                "nitrogen_ppm": { "type": "number", "minimum": 0 },
                "phosphorus_ppm": { "type": "number", "minimum": 0 },
                "potassium_ppm": { "type": "number", "minimum": 0 },
                "calcium_ppm": { "type": "number", "minimum": 0 },
                "magnesium_ppm": { "type": "number", "minimum": 0 },
                "sulfur_ppm": { "type": "number", "minimum": 0 },
                "iron_ppm": { "type": "number", "minimum": 0 }
              },
              "additionalProperties": true,
              "description": "Nutrient element concentrations in ppm"
            }
          },
          "additionalProperties": true
        },
        "crop": {
          "type": "object",
          "properties": {
            "species": {
              "type": "string",
              "description": "Plant species (scientific name)"
            },
            "variety": {
              "type": "string",
              "description": "Plant variety/cultivar"
            },
            "growth_stage": {
              "type": "string",
              "enum": ["germination", "seedling", "vegetative", "flowering", "fruiting", "harvest"],
              "description": "Current growth stage"
            },
            "days_after_planting": {
              "type": "integer",
              "minimum": 0,
              "description": "Days since planting"
            },
            "plant_count": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of plants"
            },
            "density_plants_per_m2": {
              "type": "number",
              "minimum": 0,
              "description": "Planting density per m²"
            }
          },
          "additionalProperties": true
        },
        "yield": {
          "type": "object",
          "properties": {
            "fresh_weight_kg": {
              "type": "number",
              "minimum": 0,
              "description": "Fresh weight harvest in kg"
            },
            "dry_weight_kg": {
              "type": "number",
              "minimum": 0,
              "description": "Dry weight harvest in kg"
            },
            "area_m2": {
              "type": "number",
              "minimum": 0,
              "description": "Growing area in m²"
            },
            "kg_per_m2": {
              "type": "number",
              "minimum": 0,
              "description": "Yield per area in kg/m²"
            },
            "harvest_cycle_days": {
              "type": "integer",
              "minimum": 0,
              "description": "Days per harvest cycle"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    }
  }
}
