{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/climate/data/v1/climate-model.schema.json",
  "title": "WIA Climate - Climate Model Data",
  "description": "Schema for climate model simulation data (CMIP6 compatible)",
  "definitions": {
    "climateModelData": {
      "type": "object",
      "required": ["model", "variable", "time", "value"],
      "properties": {
        "model": {
          "type": "object",
          "required": ["source_id", "experiment_id", "variant_label"],
          "properties": {
            "source_id": {
              "type": "string",
              "description": "Model identifier (CMIP6 source_id)"
            },
            "institution_id": {
              "type": "string",
              "description": "Institution identifier"
            },
            "experiment_id": {
              "type": "string",
              "description": "Experiment identifier (e.g., historical, ssp245)"
            },
            "variant_label": {
              "type": "string",
              "pattern": "^r\\d+i\\d+p\\d+f\\d+$",
              "description": "Ensemble member label (e.g., r1i1p1f1)"
            },
            "grid_label": {
              "type": "string",
              "description": "Grid label (e.g., gn, gr)"
            }
          },
          "additionalProperties": true
        },
        "variable": {
          "type": "object",
          "required": ["name", "units"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Variable name (e.g., tas, pr, psl)"
            },
            "long_name": {
              "type": "string",
              "description": "Long descriptive name"
            },
            "standard_name": {
              "type": "string",
              "description": "CF standard name"
            },
            "units": {
              "type": "string",
              "description": "Variable units"
            },
            "cell_methods": {
              "type": "string",
              "description": "Cell methods (e.g., time: mean)"
            }
          },
          "additionalProperties": true
        },
        "grid": {
          "type": "object",
          "properties": {
            "resolution_deg": {
              "type": "number",
              "minimum": 0,
              "description": "Grid resolution in degrees"
            },
            "resolution_km": {
              "type": "number",
              "minimum": 0,
              "description": "Grid resolution in km"
            },
            "nlat": {
              "type": "integer",
              "minimum": 1,
              "description": "Number of latitude points"
            },
            "nlon": {
              "type": "integer",
              "minimum": 1,
              "description": "Number of longitude points"
            },
            "grid_type": {
              "type": "string",
              "enum": ["regular_lat_lon", "gaussian", "curvilinear", "unstructured"],
              "description": "Grid type"
            }
          },
          "additionalProperties": true
        },
        "time": {
          "type": "object",
          "required": ["frequency"],
          "properties": {
            "start_date": {
              "type": "string",
              "format": "date",
              "description": "Start date (YYYY-MM-DD)"
            },
            "end_date": {
              "type": "string",
              "format": "date",
              "description": "End date (YYYY-MM-DD)"
            },
            "frequency": {
              "type": "string",
              "enum": ["fx", "yr", "mon", "day", "6hr", "3hr", "1hr", "subhr"],
              "description": "Time frequency"
            },
            "calendar": {
              "type": "string",
              "enum": ["gregorian", "standard", "proleptic_gregorian", "365_day", "360_day"],
              "description": "Calendar type"
            }
          },
          "additionalProperties": true
        },
        "value": {
          "type": "object",
          "required": ["data"],
          "properties": {
            "data": {
              "type": "number",
              "description": "Data value"
            },
            "anomaly": {
              "type": "number",
              "description": "Anomaly from climatology"
            },
            "climatology": {
              "type": "number",
              "description": "Climatological mean"
            },
            "percentile_5": {
              "type": "number",
              "description": "5th percentile"
            },
            "percentile_50": {
              "type": "number",
              "description": "50th percentile (median)"
            },
            "percentile_95": {
              "type": "number",
              "description": "95th percentile"
            },
            "standard_deviation": {
              "type": "number",
              "minimum": 0,
              "description": "Standard deviation"
            }
          },
          "additionalProperties": true
        },
        "scenario": {
          "type": "object",
          "properties": {
            "ssp": {
              "type": "string",
              "enum": ["SSP1-1.9", "SSP1-2.6", "SSP2-4.5", "SSP3-7.0", "SSP5-8.5"],
              "description": "Shared Socioeconomic Pathway"
            },
            "forcing_level_w_per_m2": {
              "type": "number",
              "description": "Radiative forcing level in W/mÂ²"
            },
            "description": {
              "type": "string",
              "description": "Scenario description"
            }
          },
          "additionalProperties": true
        },
        "reference": {
          "type": "object",
          "properties": {
            "further_info_url": {
              "type": "string",
              "format": "uri",
              "description": "ES-DOC reference URL"
            },
            "doi": {
              "type": "string",
              "description": "Dataset DOI"
            },
            "citation": {
              "type": "string",
              "description": "Citation string"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    }
  }
}
