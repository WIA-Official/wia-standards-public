# WIA Smart Wheelchair Costmap Parameters

# Global Costmap (for path planning)
global_costmap:
  ros__parameters:
    update_frequency: 1.0
    publish_frequency: 1.0
    global_frame: map
    robot_base_frame: base_link
    robot_radius: 0.35
    resolution: 0.05
    track_unknown_space: true
    rolling_window: false

    plugins: ["static_layer", "obstacle_layer", "inflation_layer"]

    static_layer:
      plugin: "nav2_costmap_2d::StaticLayer"
      map_subscribe_transient_local: true
      enabled: true

    obstacle_layer:
      plugin: "nav2_costmap_2d::ObstacleLayer"
      enabled: true
      observation_sources: scan
      scan:
        topic: /wia_wheelchair/scan
        sensor_frame: lidar_link
        data_type: LaserScan
        clearing: true
        marking: true
        max_obstacle_height: 2.0
        min_obstacle_height: 0.0
        obstacle_max_range: 8.0
        obstacle_min_range: 0.3
        raytrace_max_range: 10.0
        raytrace_min_range: 0.0

    inflation_layer:
      plugin: "nav2_costmap_2d::InflationLayer"
      cost_scaling_factor: 3.0
      inflation_radius: 0.55
      inflate_unknown: false
      inflate_around_unknown: true

# Local Costmap (for trajectory planning)
local_costmap:
  ros__parameters:
    update_frequency: 5.0
    publish_frequency: 2.0
    global_frame: odom
    robot_base_frame: base_link
    robot_radius: 0.35
    resolution: 0.05
    rolling_window: true
    width: 5
    height: 5
    track_unknown_space: false

    plugins: ["obstacle_layer", "inflation_layer"]

    obstacle_layer:
      plugin: "nav2_costmap_2d::ObstacleLayer"
      enabled: true
      observation_sources: scan
      scan:
        topic: /wia_wheelchair/scan
        sensor_frame: lidar_link
        data_type: LaserScan
        clearing: true
        marking: true
        max_obstacle_height: 2.0
        min_obstacle_height: 0.0
        obstacle_max_range: 5.0
        obstacle_min_range: 0.3
        raytrace_max_range: 6.0
        raytrace_min_range: 0.0

    inflation_layer:
      plugin: "nav2_costmap_2d::InflationLayer"
      cost_scaling_factor: 3.0
      inflation_radius: 0.55
      inflate_unknown: false

# Cost values reference:
# 0     = FREE_SPACE
# 1-127 = LOW_COST (warning area)
# 128-252 = HIGH_COST (danger area)
# 253   = INSCRIBED (inside robot radius)
# 254   = LETHAL (collision)
# 255   = NO_INFORMATION (unknown)

# Wheelchair-specific considerations:
# - Larger robot radius (0.35m) than typical mobile robots
# - Larger inflation radius (0.55m) for safety with users
# - Lower max velocity consideration in cost calculations
# - Special handling for narrow passages and doorways
