; PlatformIO Configuration for WIA Smart Wheelchair CAN Gateway
;
; This firmware bridges CAN bus communication with ROS2 via USB/Serial.

[platformio]
default_envs = stm32f4
description = WIA Smart Wheelchair CAN Gateway Firmware

[env]
framework = arduino
monitor_speed = 115200
lib_deps =
    Wire
build_flags =
    -D WIA_WHEELCHAIR_VERSION=\"1.0.0\"
    -D WIA_NODE_ID=0x01

; STM32F4 (Primary target - STM32F405/407)
[env:stm32f4]
platform = ststm32
board = genericSTM32F407VGT6
upload_protocol = stlink
build_flags =
    ${env.build_flags}
    -D HAL_CAN_MODULE_ENABLED
lib_deps =
    ${env.lib_deps}
    stm32duino/STM32duino CAN

; ESP32 (Alternative - with external MCP2515)
[env:esp32]
platform = espressif32
board = esp32dev
build_flags =
    ${env.build_flags}
    -D USE_MCP2515
lib_deps =
    ${env.lib_deps}
    autowp/autowp-mcp2515@^1.0.0
    SPI

; Teensy 4.0 (Alternative - native CAN)
[env:teensy40]
platform = teensy
board = teensy40
build_flags =
    ${env.build_flags}
    -D USE_FLEXCAN
lib_deps =
    ${env.lib_deps}
    tonton81/FlexCAN_T4
