{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://quantum.wia.live/schemas/circuit.schema.json",
  "title": "WIA Quantum Circuit",
  "description": "Quantum circuit definition following WIA Quantum standard",
  "type": "object",
  "required": ["wia_quantum_version", "type", "circuit_id", "circuit"],
  "properties": {
    "wia_quantum_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "WIA Quantum format version"
    },
    "type": {
      "type": "string",
      "const": "circuit"
    },
    "circuit_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique circuit identifier"
    },
    "name": {
      "type": "string",
      "description": "Human-readable circuit name"
    },
    "description": {
      "type": "string",
      "description": "Circuit description"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Creation timestamp"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "author": { "type": "string" },
        "tags": {
          "type": "array",
          "items": { "type": "string" }
        },
        "license": { "type": "string" }
      }
    },
    "circuit": {
      "type": "object",
      "required": ["num_qubits", "gates"],
      "properties": {
        "num_qubits": {
          "type": "integer",
          "minimum": 1,
          "description": "Number of qubits"
        },
        "num_clbits": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of classical bits"
        },
        "qasm": {
          "type": "string",
          "description": "OpenQASM 3.0 representation"
        },
        "gates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/gate"
          },
          "description": "Gate sequence"
        }
      }
    },
    "visualization": {
      "type": "object",
      "properties": {
        "layout": {
          "type": "string",
          "enum": ["linear", "circular", "grid"]
        },
        "style": {
          "type": "string",
          "enum": ["mpl", "latex", "text"]
        }
      }
    }
  },
  "definitions": {
    "gate": {
      "type": "object",
      "required": ["name", "qubits"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Gate name (h, x, y, z, cx, cz, rx, ry, rz, u, measure, reset, barrier)"
        },
        "qubits": {
          "type": "array",
          "items": { "type": "integer", "minimum": 0 },
          "description": "Target qubit indices"
        },
        "clbits": {
          "type": "array",
          "items": { "type": "integer", "minimum": 0 },
          "description": "Target classical bit indices (for measurement)"
        },
        "params": {
          "type": "array",
          "items": { "type": "number" },
          "description": "Gate parameters (angles)"
        },
        "condition": {
          "type": "object",
          "properties": {
            "clbit": { "type": "integer" },
            "value": { "type": "integer" }
          },
          "description": "Classical condition for gate execution"
        }
      }
    }
  }
}
