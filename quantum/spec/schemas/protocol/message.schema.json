{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/schemas/quantum/protocol/message.schema.json",
  "title": "WIA Quantum Protocol Message",
  "description": "Base message schema for WIA Quantum Protocol",
  "type": "object",
  "required": ["protocol", "version", "messageId", "timestamp", "type", "payload"],
  "properties": {
    "protocol": {
      "type": "string",
      "const": "wia-quantum",
      "description": "Protocol identifier"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Protocol version (semver)"
    },
    "messageId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique message identifier (UUID v4)"
    },
    "timestamp": {
      "type": "integer",
      "minimum": 0,
      "description": "Unix timestamp in milliseconds"
    },
    "type": {
      "type": "string",
      "enum": [
        "connect",
        "connect_ack",
        "disconnect",
        "submit_job",
        "job_queued",
        "job_running",
        "job_completed",
        "job_failed",
        "job_cancelled",
        "cancel_job",
        "get_job_status",
        "job_status",
        "subscribe",
        "subscribe_ack",
        "unsubscribe",
        "backend_status",
        "calibration",
        "error",
        "ping",
        "pong"
      ],
      "description": "Message type"
    },
    "payload": {
      "type": "object",
      "description": "Message payload (varies by type)"
    },
    "sessionId": {
      "type": "string",
      "description": "Session identifier"
    },
    "correlationId": {
      "type": "string",
      "format": "uuid",
      "description": "Correlation ID for request-response pairing"
    }
  }
}
