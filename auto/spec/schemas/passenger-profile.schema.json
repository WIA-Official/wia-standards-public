{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia.org/auto/schemas/passenger-profile.schema.json",
  "title": "WIA Autonomous Vehicle Passenger Accessibility Profile",
  "description": "Defines accessibility requirements and preferences for AV passengers",
  "type": "object",
  "required": ["profile_id", "version", "passenger"],
  "properties": {
    "profile_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the passenger profile"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Schema version (semver)"
    },
    "passenger": {
      "type": "object",
      "required": ["disabilities"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Passenger name (optional)"
        },
        "disabilities": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/DisabilityType"
          },
          "minItems": 1,
          "description": "List of disability types"
        },
        "service_animal": {
          "type": "object",
          "properties": {
            "has_animal": { "type": "boolean" },
            "animal_type": { "type": "string" },
            "animal_size": {
              "type": "string",
              "enum": ["small", "medium", "large"]
            }
          }
        }
      }
    },
    "mobility_aid": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["none", "manual_wheelchair", "power_wheelchair", "scooter", "walker", "cane", "crutches"]
        },
        "dimensions": {
          "type": "object",
          "properties": {
            "width_cm": { "type": "number", "minimum": 0 },
            "length_cm": { "type": "number", "minimum": 0 },
            "height_cm": { "type": "number", "minimum": 0 },
            "weight_kg": { "type": "number", "minimum": 0 }
          }
        },
        "requires_ramp": { "type": "boolean" },
        "requires_lift": { "type": "boolean" },
        "requires_securement": { "type": "boolean" }
      }
    },
    "communication": {
      "type": "object",
      "properties": {
        "preferred_language": {
          "type": "string",
          "pattern": "^[a-z]{2}$",
          "description": "ISO 639-1 language code"
        },
        "preferred_modalities": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/InteractionModality"
          }
        },
        "aac_device": { "type": "boolean" },
        "sign_language": {
          "type": ["string", "null"],
          "description": "Sign language preference (e.g., ASL, KSL)"
        }
      }
    },
    "assistance": {
      "type": "object",
      "properties": {
        "needs_boarding_help": { "type": "boolean" },
        "needs_securement_help": { "type": "boolean" },
        "companion_present": { "type": "boolean" },
        "emergency_contact": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "phone": { "type": "string" },
            "relationship": { "type": "string" }
          },
          "required": ["name", "phone"]
        }
      }
    },
    "preferences": {
      "type": "object",
      "properties": {
        "audio_volume": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "screen_brightness": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "high_contrast": { "type": "boolean" },
        "large_text": { "type": "boolean" },
        "haptic_intensity": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "minimize_walking": { "type": "boolean" }
      }
    }
  },
  "$defs": {
    "DisabilityType": {
      "type": "string",
      "enum": [
        "visual_blind",
        "visual_low_vision",
        "hearing_deaf",
        "hearing_hard",
        "mobility_wheelchair_manual",
        "mobility_wheelchair_power",
        "mobility_walker",
        "mobility_cane",
        "mobility_crutches",
        "cognitive_intellectual",
        "cognitive_autism",
        "cognitive_dementia",
        "speech",
        "multiple"
      ]
    },
    "InteractionModality": {
      "type": "string",
      "enum": [
        "visual_screen",
        "visual_led",
        "audio_tts",
        "audio_chime",
        "audio_speech_rec",
        "haptic_vibration",
        "haptic_force",
        "braille",
        "physical_button"
      ]
    }
  }
}
