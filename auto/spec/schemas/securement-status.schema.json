{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia.org/auto/schemas/securement-status.schema.json",
  "title": "WIA Autonomous Vehicle Wheelchair Securement Status",
  "description": "Real-time status of wheelchair securement system",
  "type": "object",
  "required": ["status_id", "version", "timestamp", "overall_status"],
  "properties": {
    "status_id": {
      "type": "string",
      "format": "uuid"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "vehicle_id": {
      "type": "string",
      "format": "uuid"
    },
    "securement_points": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["point_id", "position", "status"],
        "properties": {
          "point_id": { "type": "string" },
          "position": {
            "type": "string",
            "enum": ["front_left", "front_right", "rear_left", "rear_right"]
          },
          "status": {
            "type": "string",
            "enum": ["disengaged", "engaging", "engaged", "error"]
          },
          "force_newtons": {
            "type": "number",
            "minimum": 0
          },
          "locked": { "type": "boolean" }
        }
      }
    },
    "overall_status": {
      "type": "string",
      "enum": ["unsecured", "securing", "secured", "error"]
    },
    "wheelchair_detected": {
      "type": "boolean"
    },
    "wheelchair_type": {
      "type": "string",
      "enum": ["manual", "power", "scooter"]
    },
    "safety_check_passed": {
      "type": "boolean"
    },
    "ready_to_move": {
      "type": "boolean"
    },
    "error_message": {
      "type": ["string", "null"]
    }
  }
}
