{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia.org/auto/schemas/vehicle-capabilities.schema.json",
  "title": "WIA Autonomous Vehicle Accessibility Capabilities",
  "description": "Defines accessibility features available in an autonomous vehicle",
  "type": "object",
  "required": ["vehicle_id", "version", "vehicle_info", "accessibility_features"],
  "properties": {
    "vehicle_id": {
      "type": "string",
      "format": "uuid"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "vehicle_info": {
      "type": "object",
      "required": ["make", "model", "sae_level"],
      "properties": {
        "make": { "type": "string" },
        "model": { "type": "string" },
        "year": { "type": "integer", "minimum": 2020 },
        "sae_level": {
          "type": "integer",
          "minimum": 0,
          "maximum": 5,
          "description": "SAE J3016 automation level"
        },
        "license_plate": { "type": "string" }
      }
    },
    "accessibility_features": {
      "type": "object",
      "properties": {
        "entry": {
          "type": "object",
          "properties": {
            "ramp": {
              "type": "object",
              "properties": {
                "available": { "type": "boolean" },
                "type": { "type": "string", "enum": ["fold", "slide", "deploy"] },
                "max_weight_kg": { "type": "number", "minimum": 0 },
                "width_cm": { "type": "number", "minimum": 0 },
                "auto_deploy": { "type": "boolean" }
              }
            },
            "lift": {
              "type": "object",
              "properties": {
                "available": { "type": "boolean" },
                "type": { "type": "string", "enum": ["platform", "rotary"] },
                "max_weight_kg": { "type": "number", "minimum": 0 },
                "width_cm": { "type": "number", "minimum": 0 }
              }
            },
            "doors": {
              "type": "object",
              "properties": {
                "type": { "type": "string", "enum": ["swing", "slide", "gullwing"] },
                "width_cm": { "type": "number", "minimum": 0 },
                "auto_open": { "type": "boolean" },
                "low_step": { "type": "boolean" },
                "step_height_cm": { "type": "number", "minimum": 0 }
              }
            }
          }
        },
        "interior": {
          "type": "object",
          "properties": {
            "wheelchair_spaces": { "type": "integer", "minimum": 0 },
            "wheelchair_securement": {
              "type": "object",
              "properties": {
                "available": { "type": "boolean" },
                "type": { "type": "string", "enum": ["manual", "semi_auto", "full_auto"] },
                "max_width_cm": { "type": "number", "minimum": 0 },
                "max_length_cm": { "type": "number", "minimum": 0 },
                "max_weight_kg": { "type": "number", "minimum": 0 }
              }
            },
            "transfer_seat": { "type": "boolean" },
            "lowered_floor": { "type": "boolean" },
            "floor_height_cm": { "type": "number", "minimum": 0 },
            "headroom_cm": { "type": "number", "minimum": 0 }
          }
        },
        "hmi": {
          "type": "object",
          "properties": {
            "screen": {
              "type": "object",
              "properties": {
                "available": { "type": "boolean" },
                "size_inches": { "type": "number", "minimum": 0 },
                "touch": { "type": "boolean" },
                "high_contrast": { "type": "boolean" },
                "adjustable_brightness": { "type": "boolean" }
              }
            },
            "audio": {
              "type": "object",
              "properties": {
                "tts": { "type": "boolean" },
                "speech_recognition": { "type": "boolean" },
                "languages": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "volume_control": { "type": "boolean" },
                "chimes": { "type": "boolean" }
              }
            },
            "haptic": {
              "type": "object",
              "properties": {
                "vibration": { "type": "boolean" },
                "force_feedback": { "type": "boolean" }
              }
            },
            "physical_controls": {
              "type": "object",
              "properties": {
                "braille_labels": { "type": "boolean" },
                "tactile_buttons": { "type": "boolean" },
                "panic_button": { "type": "boolean" },
                "pull_over_button": { "type": "boolean" }
              }
            }
          }
        },
        "communication": {
          "type": "object",
          "properties": {
            "live_support": { "type": "boolean" },
            "video_call": { "type": "boolean" },
            "text_chat": { "type": "boolean" },
            "sign_language_support": { "type": "boolean" }
          }
        }
      }
    },
    "capacity": {
      "type": "object",
      "properties": {
        "total_passengers": { "type": "integer", "minimum": 1 },
        "wheelchair_passengers": { "type": "integer", "minimum": 0 },
        "service_animals": { "type": "boolean" }
      }
    }
  }
}
