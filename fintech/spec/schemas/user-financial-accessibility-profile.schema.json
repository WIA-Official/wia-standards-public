{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia.live/schemas/fintech/user-financial-accessibility-profile.schema.json",
  "title": "User Financial Accessibility Profile",
  "description": "WIA Fintech user accessibility preferences and needs for financial services",
  "type": "object",
  "required": ["profileId", "version", "personalInfo", "accessibilityNeeds", "financialPreferences"],
  "properties": {
    "profileId": {
      "type": "string",
      "description": "Unique identifier for the user profile"
    },
    "wiaId": {
      "type": "string",
      "description": "WIA ecosystem identifier for cross-domain sync"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Schema version"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time"
    },
    "personalInfo": {
      "type": "object",
      "required": ["preferredLanguage", "region"],
      "properties": {
        "preferredName": {
          "type": "string"
        },
        "preferredLanguage": {
          "type": "string",
          "pattern": "^[a-z]{2}(-[A-Z]{2})?$"
        },
        "region": {
          "type": "string"
        },
        "timezone": {
          "type": "string"
        }
      }
    },
    "accessibilityNeeds": {
      "type": "object",
      "required": ["sensory"],
      "properties": {
        "sensory": {
          "$ref": "#/$defs/sensoryAccessibilityNeeds"
        },
        "motor": {
          "$ref": "#/$defs/motorAccessibilityNeeds"
        },
        "cognitive": {
          "$ref": "#/$defs/cognitiveAccessibilityNeeds"
        }
      }
    },
    "financialPreferences": {
      "type": "object",
      "required": ["preferredAuthMethod"],
      "properties": {
        "preferredAuthMethod": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/authenticationMethod"
          },
          "minItems": 1
        },
        "transactionConfirmation": {
          "$ref": "#/$defs/confirmationPreference"
        },
        "notificationPreferences": {
          "$ref": "#/$defs/notificationPreferences"
        },
        "securityPreferences": {
          "$ref": "#/$defs/securityAccessibilityPreferences"
        }
      }
    },
    "atmPreferences": {
      "type": "object",
      "properties": {
        "preferredInterface": {
          "type": "string",
          "enum": ["audio", "visual", "tactile", "combined"]
        },
        "audioGuidance": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "volume": { "type": "number", "minimum": 0, "maximum": 100 },
            "speechRate": { "type": "number", "minimum": 0.5, "maximum": 2.0 },
            "language": { "type": "string" }
          }
        },
        "timeout": {
          "type": "object",
          "properties": {
            "extended": { "type": "boolean" },
            "seconds": { "type": "integer", "minimum": 30, "maximum": 300 }
          }
        },
        "receiptFormat": {
          "type": "string",
          "enum": ["paper", "email", "sms", "app", "braille", "audio", "none"]
        }
      }
    },
    "cardPreferences": {
      "type": "object",
      "properties": {
        "preferredCardType": {
          "type": "string",
          "enum": ["standard", "notched", "braille", "high_contrast", "large_print"]
        },
        "pinEntryMethod": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["keypad", "voice", "biometric", "pattern"]
          }
        },
        "contactlessPreferred": {
          "type": "boolean"
        }
      }
    },
    "wiaIntegration": {
      "type": "object",
      "properties": {
        "enabled": { "type": "boolean" },
        "connectedDevices": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/wiaDeviceConnection"
          }
        },
        "preferredOutputDevice": { "type": "string" },
        "crossDeviceSync": { "type": "boolean" }
      }
    },
    "emergencySettings": {
      "type": "object",
      "properties": {
        "emergencyContacts": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/emergencyContact"
          }
        },
        "fraudAlertPreferences": {
          "type": "object",
          "properties": {
            "immediateCall": { "type": "boolean" },
            "smsAlert": { "type": "boolean" },
            "emailAlert": { "type": "boolean" },
            "wiaDeviceAlert": { "type": "boolean" }
          }
        },
        "panicButtonEnabled": { "type": "boolean" }
      }
    }
  },
  "$defs": {
    "sensoryAccessibilityNeeds": {
      "type": "object",
      "properties": {
        "visual": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": {
              "type": "string",
              "enum": ["none", "low-vision", "legally-blind", "totally-blind"]
            },
            "colorVision": {
              "type": "string",
              "enum": ["normal", "protanopia", "deuteranopia", "tritanopia", "achromatopsia", "protanomaly", "deuteranomaly", "tritanomaly"]
            },
            "lightSensitivity": {
              "type": "string",
              "enum": ["none", "mild", "moderate", "severe"]
            },
            "preferences": {
              "type": "object",
              "properties": {
                "fontSize": {
                  "type": "string",
                  "enum": ["normal", "large", "x-large", "xx-large"]
                },
                "highContrast": { "type": "boolean" },
                "darkMode": { "type": "boolean" },
                "reduceMotion": { "type": "boolean" },
                "screenMagnification": {
                  "type": "number",
                  "minimum": 1.0,
                  "maximum": 10.0
                }
              }
            },
            "assistiveTech": {
              "type": "object",
              "properties": {
                "screenReader": { "type": "boolean" },
                "screenReaderType": {
                  "type": "string",
                  "enum": ["voiceover", "talkback", "nvda", "jaws", "other"]
                },
                "brailleDisplay": { "type": "boolean" },
                "magnifier": { "type": "boolean" }
              }
            }
          }
        },
        "auditory": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": {
              "type": "string",
              "enum": ["none", "mild", "moderate", "severe", "profound", "deaf"]
            },
            "usesHearingAid": { "type": "boolean" },
            "usesCochlearImplant": { "type": "boolean" },
            "preferredSignLanguage": {
              "type": "string",
              "enum": ["ASL", "BSL", "KSL", "JSL", "DGS", "LSF", "ISL", "other"]
            },
            "preferences": {
              "type": "object",
              "properties": {
                "visualAlerts": { "type": "boolean" },
                "captionsEnabled": { "type": "boolean" },
                "signLanguageVideo": { "type": "boolean" },
                "monoAudio": { "type": "boolean" },
                "volumeBoost": { "type": "boolean" }
              }
            }
          }
        }
      }
    },
    "motorAccessibilityNeeds": {
      "type": "object",
      "properties": {
        "level": {
          "type": "string",
          "enum": ["none", "mild", "moderate", "severe"]
        },
        "upperLimb": {
          "type": "object",
          "properties": {
            "left": { "type": "string", "enum": ["full", "limited", "minimal", "none"] },
            "right": { "type": "string", "enum": ["full", "limited", "minimal", "none"] }
          }
        },
        "fineMotor": {
          "type": "string",
          "enum": ["normal", "reduced", "limited", "none"]
        },
        "preferences": {
          "type": "object",
          "properties": {
            "largeTargets": { "type": "boolean" },
            "extendedTimeouts": { "type": "boolean" },
            "voiceControl": { "type": "boolean" },
            "switchAccess": { "type": "boolean" },
            "eyeTracking": { "type": "boolean" },
            "dwellClick": { "type": "boolean" },
            "dwellTime": { "type": "integer", "minimum": 100, "maximum": 5000 }
          }
        },
        "assistiveDevices": {
          "type": "object",
          "properties": {
            "usesWheelchair": { "type": "boolean" },
            "usesExoskeleton": { "type": "boolean" }
          }
        }
      }
    },
    "cognitiveAccessibilityNeeds": {
      "type": "object",
      "properties": {
        "level": {
          "type": "string",
          "enum": ["none", "mild", "moderate", "significant"]
        },
        "preferences": {
          "type": "object",
          "properties": {
            "simplifiedInterface": { "type": "boolean" },
            "clearLabels": { "type": "boolean" },
            "confirmBeforeActions": { "type": "boolean" },
            "stepByStepGuidance": { "type": "boolean" },
            "memoryAids": { "type": "boolean" },
            "timeExtensions": { "type": "boolean" }
          }
        },
        "readingLevel": {
          "type": "integer",
          "minimum": 1,
          "maximum": 5
        },
        "supportNeeds": {
          "type": "object",
          "properties": {
            "caregiverAccess": { "type": "boolean" },
            "transactionLimits": {
              "type": "object",
              "properties": {
                "dailyLimit": { "type": "number" },
                "singleTransactionLimit": { "type": "number" },
                "requiresConfirmation": { "type": "boolean" }
              }
            }
          }
        }
      }
    },
    "authenticationMethod": {
      "type": "string",
      "enum": ["pin", "password", "biometric_fingerprint", "biometric_face", "biometric_voice", "pattern", "otp_sms", "otp_email", "otp_app", "hardware_token", "passkey"]
    },
    "confirmationPreference": {
      "type": "object",
      "properties": {
        "method": {
          "type": "string",
          "enum": ["visual", "audio", "haptic", "multi_modal"]
        },
        "requiresExplicitConfirm": { "type": "boolean" },
        "repeatConfirmation": { "type": "boolean" }
      }
    },
    "notificationPreferences": {
      "type": "object",
      "properties": {
        "channels": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["push", "sms", "email", "voice_call", "wia_device"]
          }
        },
        "quietHours": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "start": { "type": "string", "format": "time" },
            "end": { "type": "string", "format": "time" },
            "allowUrgent": { "type": "boolean" }
          }
        }
      }
    },
    "securityAccessibilityPreferences": {
      "type": "object",
      "properties": {
        "pinPreferences": {
          "type": "object",
          "properties": {
            "length": { "type": "integer", "enum": [4, 6, 8] },
            "audioFeedback": { "type": "boolean" },
            "hapticFeedback": { "type": "boolean" },
            "extendedTimeout": { "type": "boolean" },
            "timeoutSeconds": { "type": "integer", "minimum": 30, "maximum": 300 }
          }
        },
        "otpPreferences": {
          "type": "object",
          "properties": {
            "deliveryMethod": { "type": "string", "enum": ["sms", "email", "app", "voice"] },
            "extendedValidity": { "type": "boolean" },
            "validitySeconds": { "type": "integer", "minimum": 30, "maximum": 300 },
            "audioReadout": { "type": "boolean" }
          }
        },
        "sessionPreferences": {
          "type": "object",
          "properties": {
            "extendedSession": { "type": "boolean" },
            "sessionTimeoutMinutes": { "type": "integer", "minimum": 5, "maximum": 60 },
            "inactivityWarning": { "type": "boolean" }
          }
        }
      }
    },
    "wiaDeviceConnection": {
      "type": "object",
      "required": ["deviceId", "deviceType"],
      "properties": {
        "deviceId": { "type": "string" },
        "deviceType": {
          "type": "string",
          "enum": ["exoskeleton", "bionic_eye", "voice_sign", "smart_wheelchair", "hearing_aid"]
        },
        "connectionStatus": {
          "type": "string",
          "enum": ["connected", "disconnected", "pairing"]
        },
        "lastSeen": { "type": "string", "format": "date-time" }
      }
    },
    "emergencyContact": {
      "type": "object",
      "required": ["name", "phone"],
      "properties": {
        "name": { "type": "string" },
        "relationship": { "type": "string" },
        "phone": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "notifyOnFraud": { "type": "boolean" },
        "notifyOnLargeTransaction": { "type": "boolean" }
      }
    }
  }
}
