{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.org/schemas/xr/device-capabilities.schema.json",
  "title": "XR Device Capabilities",
  "description": "Hardware capabilities and features of XR devices",
  "type": "object",
  "required": ["device_id", "device_name", "manufacturer", "model", "display", "audio", "input", "haptics", "built_in_accessibility", "wia_compatibility"],
  "properties": {
    "device_id": {
      "type": "string",
      "description": "Unique device identifier"
    },
    "device_name": {
      "type": "string",
      "description": "Device display name"
    },
    "manufacturer": {
      "type": "string",
      "description": "Device manufacturer"
    },
    "model": {
      "type": "string",
      "description": "Device model"
    },
    "firmware_version": {
      "type": "string",
      "description": "Firmware version"
    },
    "display": {
      "type": "object",
      "required": ["type", "resolution_per_eye", "refresh_rates", "field_of_view", "supports_passthrough"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["lcd", "oled", "micro_oled", "waveguide"],
          "description": "Display technology"
        },
        "resolution_per_eye": {
          "type": "object",
          "required": ["width", "height"],
          "properties": {
            "width": { "type": "integer", "minimum": 1 },
            "height": { "type": "integer", "minimum": 1 }
          }
        },
        "refresh_rates": {
          "type": "array",
          "items": { "type": "number" },
          "description": "Supported refresh rates in Hz"
        },
        "field_of_view": {
          "type": "object",
          "required": ["horizontal", "vertical"],
          "properties": {
            "horizontal": { "type": "number", "description": "Horizontal FOV in degrees" },
            "vertical": { "type": "number", "description": "Vertical FOV in degrees" }
          }
        },
        "supports_passthrough": {
          "type": "boolean",
          "description": "Supports video passthrough"
        },
        "passthrough_color": {
          "type": "boolean",
          "description": "Passthrough is color (vs grayscale)"
        },
        "supports_foveated_rendering": {
          "type": "boolean",
          "description": "Supports foveated rendering"
        }
      }
    },
    "audio": {
      "type": "object",
      "required": ["has_speakers", "has_microphone", "supports_spatial_audio"],
      "properties": {
        "has_speakers": { "type": "boolean" },
        "speaker_type": {
          "type": "string",
          "enum": ["integrated", "over_ear", "open_ear"]
        },
        "has_microphone": { "type": "boolean" },
        "supports_spatial_audio": { "type": "boolean" },
        "supports_bone_conduction": { "type": "boolean" }
      }
    },
    "input": {
      "type": "object",
      "required": ["controller_type", "has_eye_tracking", "has_hand_tracking", "voice_control"],
      "properties": {
        "controller_type": {
          "type": "string",
          "enum": ["6dof", "3dof", "none"],
          "description": "Controller degrees of freedom"
        },
        "has_eye_tracking": { "type": "boolean" },
        "has_hand_tracking": { "type": "boolean" },
        "has_face_tracking": { "type": "boolean" },
        "has_body_tracking": { "type": "boolean" },
        "voice_control": { "type": "boolean" },
        "controller_features": {
          "type": "object",
          "properties": {
            "has_haptics": { "type": "boolean" },
            "has_triggers": { "type": "boolean" },
            "has_grip": { "type": "boolean" },
            "has_thumbstick": { "type": "boolean" },
            "has_touchpad": { "type": "boolean" },
            "button_count": { "type": "integer" }
          }
        }
      }
    },
    "haptics": {
      "type": "object",
      "required": ["controller_haptics"],
      "properties": {
        "controller_haptics": { "type": "boolean" },
        "haptic_fidelity": {
          "type": "string",
          "enum": ["basic", "hd", "advanced"]
        },
        "supports_external_haptics": { "type": "boolean" }
      }
    },
    "built_in_accessibility": {
      "type": "object",
      "required": ["screen_reader", "magnification", "color_correction", "caption_support"],
      "properties": {
        "screen_reader": { "type": "boolean" },
        "magnification": { "type": "boolean" },
        "color_correction": { "type": "boolean" },
        "caption_support": { "type": "boolean" },
        "voice_control": { "type": "boolean" },
        "one_handed_mode": { "type": "boolean" },
        "seated_mode": { "type": "boolean" }
      }
    },
    "wia_compatibility": {
      "type": "object",
      "required": ["protocol_version"],
      "properties": {
        "exoskeleton_compatible": { "type": "boolean", "default": false },
        "bionic_eye_compatible": { "type": "boolean", "default": false },
        "voice_sign_compatible": { "type": "boolean", "default": false },
        "protocol_version": {
          "type": "string",
          "description": "WIA protocol version supported"
        }
      }
    }
  }
}
