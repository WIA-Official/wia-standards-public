{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.org/schemas/xr/comfort-settings.schema.json",
  "title": "XR Comfort Settings",
  "description": "Motion, physical, and cognitive comfort settings for XR experiences",
  "type": "object",
  "required": ["motion", "physical", "cognitive", "session"],
  "properties": {
    "motion": {
      "type": "object",
      "required": ["movement_type", "vignette_enabled", "seated_mode"],
      "properties": {
        "movement_type": {
          "type": "string",
          "enum": ["smooth", "teleport", "snap_turn", "hybrid"],
          "default": "smooth",
          "description": "Locomotion method"
        },
        "vignette_enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable comfort vignette"
        },
        "vignette_intensity": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.5,
          "description": "Vignette darkness level"
        },
        "vignette_on_movement": {
          "type": "boolean",
          "default": true,
          "description": "Apply vignette during movement"
        },
        "vignette_on_rotation": {
          "type": "boolean",
          "default": true,
          "description": "Apply vignette during rotation"
        },
        "max_movement_speed": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 20.0,
          "default": 3.0,
          "description": "Maximum movement speed in m/s"
        },
        "max_rotation_speed": {
          "type": "number",
          "minimum": 30,
          "maximum": 360,
          "default": 180,
          "description": "Maximum rotation speed in deg/s"
        },
        "acceleration_smoothing": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.3,
          "description": "Movement acceleration smoothing"
        },
        "seated_mode": {
          "type": "boolean",
          "default": false,
          "description": "Enable seated play mode"
        },
        "seated_height_offset_meters": {
          "type": "number",
          "minimum": -1.0,
          "maximum": 1.0,
          "default": 0.0,
          "description": "Height adjustment for seated mode"
        },
        "snap_turn_angle_degrees": {
          "type": "integer",
          "enum": [15, 30, 45, 60, 90],
          "default": 45,
          "description": "Rotation angle for snap turning"
        }
      }
    },
    "physical": {
      "type": "object",
      "required": ["play_area_type", "rest_reminder_enabled", "boundary_style"],
      "properties": {
        "play_area_type": {
          "type": "string",
          "enum": ["seated", "standing", "room_scale"],
          "default": "standing"
        },
        "play_area_bounds": {
          "type": "object",
          "properties": {
            "width_meters": { "type": "number", "minimum": 0.5 },
            "depth_meters": { "type": "number", "minimum": 0.5 }
          }
        },
        "rest_reminder_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable periodic rest reminders"
        },
        "rest_reminder_interval_minutes": {
          "type": "integer",
          "minimum": 15,
          "maximum": 120,
          "default": 30,
          "description": "Minutes between rest reminders"
        },
        "boundary_style": {
          "type": "string",
          "enum": ["grid", "wall", "outline", "passthrough"],
          "default": "grid",
          "description": "Play area boundary visualization"
        },
        "boundary_sensitivity": {
          "type": "string",
          "enum": ["close", "normal", "far"],
          "default": "normal",
          "description": "When to show boundary warning"
        }
      }
    },
    "cognitive": {
      "type": "object",
      "required": ["allow_pause_anytime", "simplified_ui", "safe_space_enabled", "content_warnings_enabled"],
      "properties": {
        "allow_pause_anytime": {
          "type": "boolean",
          "default": true,
          "description": "Allow pausing at any moment"
        },
        "auto_pause_on_overwhelm": {
          "type": "boolean",
          "default": false,
          "description": "Auto-pause when stress detected"
        },
        "simplified_ui": {
          "type": "boolean",
          "default": false,
          "description": "Use simplified interface"
        },
        "reduce_simultaneous_stimuli": {
          "type": "boolean",
          "default": false,
          "description": "Limit concurrent visual/audio events"
        },
        "max_simultaneous_sounds": {
          "type": "integer",
          "minimum": 1,
          "maximum": 32,
          "default": 8,
          "description": "Maximum concurrent sound sources"
        },
        "safe_space_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable safe space retreat"
        },
        "safe_space_trigger": {
          "type": "string",
          "enum": ["button", "gesture", "voice", "automatic"],
          "default": "button",
          "description": "How to activate safe space"
        },
        "safe_space_environment": {
          "type": "string",
          "description": "Environment ID for safe space"
        },
        "content_warnings_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Show content warnings"
        },
        "trigger_warnings": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Specific triggers to warn about"
        }
      }
    },
    "session": {
      "type": "object",
      "required": ["warning_before_limit_minutes"],
      "properties": {
        "max_session_duration_minutes": {
          "type": "integer",
          "minimum": 15,
          "maximum": 480,
          "description": "Maximum session length"
        },
        "required_break_duration_minutes": {
          "type": "integer",
          "minimum": 5,
          "maximum": 60,
          "description": "Required break after max session"
        },
        "warning_before_limit_minutes": {
          "type": "integer",
          "minimum": 1,
          "maximum": 30,
          "default": 5,
          "description": "Warning time before session limit"
        }
      }
    }
  }
}
