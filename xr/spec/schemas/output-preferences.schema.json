{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.org/schemas/xr/output-preferences.schema.json",
  "title": "XR Output Preferences",
  "description": "Output and feedback preferences for XR experiences",
  "type": "object",
  "required": ["captions", "audio_description", "screen_reader", "notifications"],
  "properties": {
    "captions": {
      "type": "object",
      "required": ["enabled"],
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable captions/subtitles"
        },
        "font_size": {
          "type": "string",
          "enum": ["small", "medium", "large", "extra_large"],
          "default": "medium"
        },
        "font_family": {
          "type": "string",
          "default": "system"
        },
        "text_color": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#FFFFFF",
          "description": "Text color in hex"
        },
        "background_color": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6,8}$",
          "default": "#000000AA",
          "description": "Background color with alpha"
        },
        "background_opacity": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.7
        },
        "position": {
          "type": "object",
          "properties": {
            "mode": {
              "type": "string",
              "enum": ["floating", "fixed", "attached_to_speaker"],
              "default": "floating"
            },
            "position_3d": {
              "type": "object",
              "properties": {
                "distance_meters": { "type": "number", "minimum": 0.5, "maximum": 5.0, "default": 2.0 },
                "vertical_angle": { "type": "number", "minimum": -60, "maximum": 60, "default": -15 },
                "horizontal_offset": { "type": "number", "minimum": -60, "maximum": 60, "default": 0 }
              }
            },
            "follow_head": { "type": "boolean", "default": true },
            "follow_speed": { "type": "number", "minimum": 0.0, "maximum": 1.0, "default": 0.3 }
          }
        },
        "speaker_identification": {
          "type": "boolean",
          "default": true,
          "description": "Show speaker names"
        },
        "sound_descriptions": {
          "type": "boolean",
          "default": true,
          "description": "Describe sound effects"
        },
        "music_descriptions": {
          "type": "boolean",
          "default": true,
          "description": "Describe music/mood"
        },
        "language": {
          "type": "string",
          "description": "BCP-47 language code",
          "default": "en-US"
        },
        "translate_from": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Auto-translate from these languages"
        }
      }
    },
    "audio_description": {
      "type": "object",
      "required": ["enabled"],
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable audio descriptions"
        },
        "voice": {
          "type": "string",
          "enum": ["male", "female", "neutral"],
          "default": "neutral"
        },
        "speed": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 2.0,
          "default": 1.0
        },
        "detail_level": {
          "type": "string",
          "enum": ["minimal", "standard", "detailed"],
          "default": "standard"
        },
        "describe_actions": {
          "type": "boolean",
          "default": true
        },
        "describe_scenes": {
          "type": "boolean",
          "default": true
        },
        "describe_ui": {
          "type": "boolean",
          "default": true
        }
      }
    },
    "sign_language": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable sign language interpreter"
        },
        "language": {
          "type": "string",
          "enum": ["ASL", "BSL", "KSL", "JSL", "DGS", "LSF", "Auslan", "other"],
          "default": "ASL"
        },
        "avatar_style": {
          "type": "string",
          "enum": ["realistic", "stylized", "minimal"],
          "default": "stylized"
        },
        "avatar_position": {
          "type": "object",
          "properties": {
            "mode": {
              "type": "string",
              "enum": ["corner", "beside_speaker", "custom"],
              "default": "corner"
            },
            "corner": {
              "type": "string",
              "enum": ["top_left", "top_right", "bottom_left", "bottom_right"],
              "default": "bottom_right"
            },
            "custom_position": {
              "type": "object",
              "properties": {
                "x": { "type": "number", "minimum": -1.0, "maximum": 1.0 },
                "y": { "type": "number", "minimum": -1.0, "maximum": 1.0 },
                "z": { "type": "number", "minimum": 0.5, "maximum": 5.0 }
              }
            }
          }
        },
        "avatar_size": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 2.0,
          "default": 1.0
        },
        "signing_speed": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 2.0,
          "default": 1.0
        }
      }
    },
    "screen_reader": {
      "type": "object",
      "required": ["enabled"],
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable screen reader"
        },
        "verbosity": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "default": "medium"
        },
        "speak_hints": {
          "type": "boolean",
          "default": true,
          "description": "Speak interaction hints"
        },
        "speak_notifications": {
          "type": "boolean",
          "default": true,
          "description": "Speak notifications"
        },
        "voice_rate": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 3.0,
          "default": 1.0,
          "description": "Speech rate multiplier"
        },
        "voice_pitch": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 2.0,
          "default": 1.0,
          "description": "Voice pitch multiplier"
        }
      }
    },
    "notifications": {
      "type": "object",
      "required": ["visual_alerts", "audio_alerts", "haptic_alerts"],
      "properties": {
        "visual_alerts": {
          "type": "boolean",
          "default": true,
          "description": "Show visual notifications"
        },
        "audio_alerts": {
          "type": "boolean",
          "default": true,
          "description": "Play audio notifications"
        },
        "haptic_alerts": {
          "type": "boolean",
          "default": true,
          "description": "Vibrate for notifications"
        },
        "flash_screen": {
          "type": "boolean",
          "default": false,
          "description": "Flash screen for alerts"
        },
        "notification_position": {
          "type": "string",
          "enum": ["top_center", "bottom_center", "top_left", "top_right", "wrist", "floating"],
          "default": "top_center"
        }
      }
    }
  }
}
