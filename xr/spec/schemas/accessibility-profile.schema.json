{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.org/schemas/xr/accessibility-profile.schema.json",
  "title": "XR Accessibility Profile",
  "description": "Complete accessibility profile for XR experiences",
  "type": "object",
  "required": ["profile_id", "version", "disabilities", "sensory", "input", "output", "comfort"],
  "properties": {
    "profile_id": {
      "type": "string",
      "description": "Unique profile identifier",
      "pattern": "^prof_[a-zA-Z0-9]+$"
    },
    "version": {
      "type": "string",
      "description": "Profile schema version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Profile creation timestamp"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp"
    },
    "user_hash": {
      "type": "string",
      "description": "Anonymized user identifier"
    },
    "disabilities": {
      "$ref": "#/definitions/DisabilityProfile"
    },
    "sensory": {
      "$ref": "sensory-preferences.schema.json"
    },
    "input": {
      "$ref": "input-preferences.schema.json"
    },
    "output": {
      "$ref": "output-preferences.schema.json"
    },
    "comfort": {
      "$ref": "comfort-settings.schema.json"
    },
    "wia_integrations": {
      "$ref": "#/definitions/WIAIntegrations"
    }
  },
  "definitions": {
    "DisabilityProfile": {
      "type": "object",
      "required": ["has_multiple"],
      "properties": {
        "visual": {
          "$ref": "#/definitions/VisualDisability"
        },
        "auditory": {
          "$ref": "#/definitions/AuditoryDisability"
        },
        "motor": {
          "$ref": "#/definitions/MotorDisability"
        },
        "cognitive": {
          "$ref": "#/definitions/CognitiveDisability"
        },
        "speech": {
          "$ref": "#/definitions/SpeechDisability"
        },
        "has_multiple": {
          "type": "boolean",
          "description": "Indicates multiple disabilities"
        }
      }
    },
    "VisualDisability": {
      "type": "object",
      "required": ["level", "color_vision", "photosensitivity"],
      "properties": {
        "level": {
          "type": "string",
          "enum": ["none", "low_vision", "legally_blind", "totally_blind"]
        },
        "conditions": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["macular_degeneration", "glaucoma", "diabetic_retinopathy", "retinitis_pigmentosa", "cataracts", "nystagmus", "other"]
          }
        },
        "color_vision": {
          "type": "string",
          "enum": ["normal", "protanopia", "deuteranopia", "tritanopia", "achromatopsia"]
        },
        "field_of_vision": {
          "type": "object",
          "properties": {
            "horizontal_degrees": {
              "type": "number",
              "minimum": 0,
              "maximum": 180
            },
            "vertical_degrees": {
              "type": "number",
              "minimum": 0,
              "maximum": 120
            },
            "blind_spots": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "center_x": { "type": "number" },
                  "center_y": { "type": "number" },
                  "radius": { "type": "number" }
                }
              }
            }
          }
        },
        "photosensitivity": {
          "type": "string",
          "enum": ["none", "mild", "moderate", "severe"]
        }
      }
    },
    "AuditoryDisability": {
      "type": "object",
      "required": ["level", "preferred_communication", "uses_hearing_device"],
      "properties": {
        "level": {
          "type": "string",
          "enum": ["none", "hard_of_hearing", "deaf", "deafblind"]
        },
        "hearing_threshold": {
          "type": "object",
          "properties": {
            "left_ear": {
              "type": "number",
              "minimum": 0,
              "maximum": 120
            },
            "right_ear": {
              "type": "number",
              "minimum": 0,
              "maximum": 120
            }
          }
        },
        "frequency_response": {
          "type": "object",
          "properties": {
            "low_freq_loss": { "type": "boolean" },
            "mid_freq_loss": { "type": "boolean" },
            "high_freq_loss": { "type": "boolean" }
          }
        },
        "preferred_communication": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["spoken", "sign_language", "written", "cued_speech"]
          }
        },
        "sign_language": {
          "$ref": "#/definitions/SignLanguageCode"
        },
        "uses_hearing_device": {
          "type": "boolean"
        },
        "hearing_device_type": {
          "type": "string",
          "enum": ["hearing_aid", "cochlear_implant", "bone_anchored"]
        }
      }
    },
    "MotorDisability": {
      "type": "object",
      "required": ["level", "affected_areas", "mobility", "fine_motor"],
      "properties": {
        "level": {
          "type": "string",
          "enum": ["none", "mild", "moderate", "severe"]
        },
        "affected_areas": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["upper_limb_left", "upper_limb_right", "lower_limb_left", "lower_limb_right", "trunk", "neck", "face"]
          }
        },
        "mobility": {
          "type": "string",
          "enum": ["ambulatory", "assisted_walking", "wheelchair", "bed_bound"]
        },
        "fine_motor": {
          "type": "object",
          "required": ["dominant_hand", "grip_strength", "precision", "tremor"],
          "properties": {
            "dominant_hand": {
              "type": "string",
              "enum": ["left", "right", "ambidextrous", "neither"]
            },
            "grip_strength": {
              "type": "string",
              "enum": ["normal", "reduced", "minimal", "none"]
            },
            "precision": {
              "type": "string",
              "enum": ["normal", "reduced", "minimal"]
            },
            "tremor": {
              "type": "string",
              "enum": ["none", "mild", "moderate", "severe"]
            }
          }
        },
        "range_of_motion": {
          "type": "object",
          "properties": {
            "neck_rotation": { "type": "number", "minimum": 0, "maximum": 100 },
            "arm_reach": { "type": "number", "minimum": 0, "maximum": 100 },
            "wrist_rotation": { "type": "number", "minimum": 0, "maximum": 100 },
            "finger_dexterity": { "type": "number", "minimum": 0, "maximum": 100 }
          }
        },
        "fatigue_threshold_minutes": {
          "type": "number",
          "minimum": 1
        },
        "assistive_devices": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["wheelchair_manual", "wheelchair_powered", "walker", "cane", "prosthetic", "wia_exoskeleton", "adaptive_controller", "mouth_stick", "head_pointer", "eye_tracker"]
          }
        }
      }
    },
    "CognitiveDisability": {
      "type": "object",
      "required": ["level", "processing", "needs_predictability", "needs_simplified_interface", "needs_extended_time", "photosensitive_epilepsy", "motion_sensitivity"],
      "properties": {
        "level": {
          "type": "string",
          "enum": ["none", "mild", "moderate", "significant"]
        },
        "conditions": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["autism_spectrum", "adhd", "dyslexia", "dyscalculia", "intellectual_disability", "traumatic_brain_injury", "dementia", "epilepsy", "ptsd", "anxiety_disorder", "other"]
          }
        },
        "processing": {
          "type": "object",
          "properties": {
            "speed": { "type": "string", "enum": ["normal", "slower", "variable"] },
            "working_memory": { "type": "string", "enum": ["normal", "reduced", "significantly_reduced"] },
            "attention_span_minutes": { "type": "number" },
            "multitasking_ability": { "type": "string", "enum": ["normal", "limited", "single_task_only"] }
          }
        },
        "sensory_processing": {
          "type": "object",
          "properties": {
            "visual_overload_threshold": { "type": "string", "enum": ["high", "normal", "low", "very_low"] },
            "auditory_overload_threshold": { "type": "string", "enum": ["high", "normal", "low", "very_low"] },
            "haptic_sensitivity": { "type": "string", "enum": ["hypo", "normal", "hyper"] }
          }
        },
        "needs_predictability": { "type": "boolean" },
        "needs_simplified_interface": { "type": "boolean" },
        "needs_extended_time": { "type": "boolean" },
        "photosensitive_epilepsy": { "type": "boolean" },
        "motion_sensitivity": {
          "type": "string",
          "enum": ["none", "mild", "moderate", "severe"]
        }
      }
    },
    "SpeechDisability": {
      "type": "object",
      "required": ["level", "uses_aac"],
      "properties": {
        "level": {
          "type": "string",
          "enum": ["none", "mild", "moderate", "severe", "nonverbal"]
        },
        "conditions": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["stuttering", "dysarthria", "apraxia", "aphasia", "voice_disorder", "laryngectomy", "other"]
          }
        },
        "voice_characteristics": {
          "type": "object",
          "properties": {
            "intelligibility": { "type": "string", "enum": ["clear", "reduced", "limited", "unintelligible"] },
            "volume": { "type": "string", "enum": ["normal", "quiet", "loud", "variable"] },
            "rate": { "type": "string", "enum": ["normal", "slow", "fast", "variable"] }
          }
        },
        "uses_aac": { "type": "boolean" },
        "aac_type": {
          "type": "string",
          "enum": ["text_based", "symbol_based", "speech_generating"]
        }
      }
    },
    "SignLanguageCode": {
      "type": "string",
      "enum": ["ASL", "BSL", "KSL", "JSL", "DGS", "LSF", "Auslan", "other"]
    },
    "WIAIntegrations": {
      "type": "object",
      "properties": {
        "exoskeleton": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "device_id": { "type": "string" },
            "haptic_mapping": {
              "type": "object",
              "properties": {
                "environment_textures": { "type": "boolean" },
                "collision_feedback": { "type": "boolean" },
                "ui_feedback": { "type": "boolean" },
                "notification_feedback": { "type": "boolean" }
              }
            },
            "movement_assistance": {
              "type": "object",
              "properties": {
                "gesture_assistance": { "type": "boolean" },
                "assistance_level": { "type": "string", "enum": ["full", "partial", "guide"] }
              }
            }
          }
        },
        "bionic_eye": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "device_id": { "type": "string" },
            "visual_mode": { "type": "string", "enum": ["vr_only", "passthrough_only", "mixed", "picture_in_picture"] },
            "contrast_enhancement": { "type": "boolean" },
            "edge_detection": { "type": "boolean" },
            "object_highlighting": { "type": "boolean" }
          }
        },
        "voice_sign": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "display_mode": { "type": "string", "enum": ["avatar", "notation", "both"] },
            "avatar_in_vr": { "type": "boolean" },
            "translate_vr_audio": { "type": "boolean" },
            "translate_npc_speech": { "type": "boolean" },
            "translate_player_voice": { "type": "boolean" }
          }
        }
      }
    }
  }
}
