{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/schemas/cognitive-aac/cognitive-profile.schema.json",
  "title": "WIA Cognitive Profile",
  "description": "Standard schema for cognitive profiles in AAC systems - WIA Cognitive AAC Standard",
  "type": "object",
  "required": ["id", "version", "createdAt", "updatedAt", "subject", "domains", "summary", "aacRecommendations", "assessment"],
  "properties": {
    "id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this profile"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Schema version (semver)"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "Profile creation timestamp (ISO 8601)"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp (ISO 8601)"
    },
    "subject": {
      "$ref": "#/definitions/Subject"
    },
    "domains": {
      "$ref": "#/definitions/CognitiveDomains"
    },
    "summary": {
      "$ref": "#/definitions/ProfileSummary"
    },
    "aacRecommendations": {
      "$ref": "#/definitions/AACAdaptation"
    },
    "assessment": {
      "$ref": "#/definitions/AssessmentInfo"
    }
  },
  "definitions": {
    "CognitiveLevel": {
      "type": "integer",
      "minimum": 1,
      "maximum": 5,
      "description": "1=PROFOUND, 2=SEVERE, 3=MODERATE, 4=MILD, 5=TYPICAL"
    },
    "Subject": {
      "type": "object",
      "required": ["id"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Anonymized subject identifier"
        },
        "birthYear": {
          "type": "integer",
          "minimum": 1900,
          "maximum": 2100,
          "description": "Birth year (optional)"
        },
        "primaryDiagnosis": {
          "type": "string",
          "description": "Primary diagnosis (optional)"
        }
      }
    },
    "CognitiveDomains": {
      "type": "object",
      "required": ["memory", "attention", "language", "executive", "visualSpatial", "socialCognition"],
      "properties": {
        "memory": {
          "$ref": "#/definitions/MemoryDomain"
        },
        "attention": {
          "$ref": "#/definitions/AttentionDomain"
        },
        "language": {
          "$ref": "#/definitions/LanguageDomain"
        },
        "executive": {
          "$ref": "#/definitions/ExecutiveFunctionDomain"
        },
        "visualSpatial": {
          "$ref": "#/definitions/VisualSpatialDomain"
        },
        "socialCognition": {
          "$ref": "#/definitions/SocialCognitionDomain"
        }
      }
    },
    "MemoryDomain": {
      "type": "object",
      "required": ["immediateRecall", "workingMemory", "longTermMemory"],
      "properties": {
        "immediateRecall": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "span": {
              "type": "integer",
              "minimum": 0,
              "maximum": 15,
              "description": "Memory span (number of items)"
            },
            "assessmentDate": {
              "type": "string",
              "format": "date-time"
            }
          }
        },
        "workingMemory": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "complexity": {
              "type": "number",
              "minimum": 1,
              "maximum": 10,
              "description": "Processable complexity level"
            }
          }
        },
        "longTermMemory": {
          "type": "object",
          "required": ["episodic", "semantic", "procedural"],
          "properties": {
            "episodic": { "$ref": "#/definitions/CognitiveLevel" },
            "semantic": { "$ref": "#/definitions/CognitiveLevel" },
            "procedural": { "$ref": "#/definitions/CognitiveLevel" }
          }
        }
      }
    },
    "AttentionDomain": {
      "type": "object",
      "required": ["sustained", "selective", "divided", "shifting"],
      "properties": {
        "sustained": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "durationMinutes": {
              "type": "number",
              "minimum": 0,
              "description": "Maximum focus duration in minutes"
            }
          }
        },
        "selective": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "distractibility": {
              "type": "number",
              "minimum": 1,
              "maximum": 10,
              "description": "Distractibility level (higher = more distractible)"
            }
          }
        },
        "divided": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "maxTasks": {
              "type": "integer",
              "minimum": 0,
              "description": "Maximum concurrent tasks"
            }
          }
        },
        "shifting": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "transitionTimeSeconds": {
              "type": "number",
              "minimum": 0,
              "description": "Time needed for attention shift in seconds"
            }
          }
        }
      }
    },
    "LanguageDomain": {
      "type": "object",
      "required": ["receptive", "expressive"],
      "properties": {
        "receptive": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "complexityLevel": {
              "type": "number",
              "minimum": 1,
              "maximum": 10
            }
          }
        },
        "expressive": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "complexityLevel": {
              "type": "number",
              "minimum": 1,
              "maximum": 10
            }
          }
        },
        "naming": {
          "type": "object",
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "accuracy": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            }
          }
        },
        "repetition": {
          "type": "object",
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "maxLength": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      }
    },
    "ExecutiveFunctionDomain": {
      "type": "object",
      "required": ["planning", "inhibition", "flexibility", "problemSolving"],
      "properties": {
        "planning": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "maxSteps": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "inhibition": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "errorRate": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            }
          }
        },
        "flexibility": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "adaptationSpeed": {
              "type": "number",
              "minimum": 1,
              "maximum": 10
            }
          }
        },
        "problemSolving": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "maxComplexity": {
              "type": "number",
              "minimum": 1,
              "maximum": 10
            }
          }
        }
      }
    },
    "VisualSpatialDomain": {
      "type": "object",
      "required": ["visualPerception", "spatialOrientation", "construction"],
      "properties": {
        "visualPerception": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "acuity": { "type": "string" }
          }
        },
        "spatialOrientation": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" }
          }
        },
        "construction": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" }
          }
        }
      }
    },
    "SocialCognitionDomain": {
      "type": "object",
      "required": ["emotionRecognition", "theoryOfMind", "socialJudgment"],
      "properties": {
        "emotionRecognition": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "modalities": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["face", "voice", "body"]
              }
            }
          }
        },
        "theoryOfMind": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" }
          }
        },
        "socialJudgment": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" }
          }
        }
      }
    },
    "ProfileSummary": {
      "type": "object",
      "required": ["overallLevel", "strengths", "challenges"],
      "properties": {
        "overallLevel": { "$ref": "#/definitions/CognitiveLevel" },
        "strengths": {
          "type": "array",
          "items": { "type": "string" }
        },
        "challenges": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },
    "AACAdaptation": {
      "type": "object",
      "required": ["interface", "symbols", "input", "feedback", "pacing"],
      "properties": {
        "interface": {
          "type": "object",
          "required": ["maxItemsPerScreen", "layoutType", "iconSize", "animationsEnabled"],
          "properties": {
            "maxItemsPerScreen": {
              "type": "integer",
              "minimum": 1,
              "maximum": 64
            },
            "layoutType": {
              "type": "string",
              "enum": ["grid", "list", "scene"]
            },
            "iconSize": {
              "type": "string",
              "enum": ["large", "medium", "small"]
            },
            "animationsEnabled": { "type": "boolean" }
          }
        },
        "symbols": {
          "type": "object",
          "required": ["preferredType", "abstractionLevel", "labelPosition"],
          "properties": {
            "preferredType": {
              "type": "string",
              "enum": ["photos", "pictograms", "text", "mixed"]
            },
            "abstractionLevel": {
              "type": "integer",
              "minimum": 1,
              "maximum": 3
            },
            "labelPosition": {
              "type": "string",
              "enum": ["above", "below", "none"]
            }
          }
        },
        "input": {
          "type": "object",
          "required": ["methods"],
          "properties": {
            "methods": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["touch", "switch", "eyeGaze", "voice"]
              }
            },
            "dwellTimeMs": {
              "type": "integer",
              "minimum": 0
            },
            "scanSpeed": {
              "type": "number",
              "minimum": 0
            }
          }
        },
        "feedback": {
          "type": "object",
          "required": ["auditory", "visual", "haptic", "confirmationRequired"],
          "properties": {
            "auditory": { "type": "boolean" },
            "visual": { "type": "boolean" },
            "haptic": { "type": "boolean" },
            "confirmationRequired": { "type": "boolean" }
          }
        },
        "pacing": {
          "type": "object",
          "required": ["autoAdvance", "delayBetweenItemsMs", "timeoutEnabled"],
          "properties": {
            "autoAdvance": { "type": "boolean" },
            "delayBetweenItemsMs": {
              "type": "integer",
              "minimum": 0
            },
            "timeoutEnabled": { "type": "boolean" },
            "timeoutMs": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      }
    },
    "AssessmentInfo": {
      "type": "object",
      "required": ["tool", "date"],
      "properties": {
        "tool": {
          "type": "string",
          "description": "Assessment tool used"
        },
        "assessor": {
          "type": "string",
          "description": "Assessor name/ID"
        },
        "date": {
          "type": "string",
          "format": "date-time"
        },
        "notes": {
          "type": "string"
        }
      }
    }
  }
}
