{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/schemas/cognitive-aac/autism-profile.schema.json",
  "title": "WIA Autism Profile",
  "description": "Extended cognitive profile schema for autism spectrum - WIA Cognitive AAC Standard",
  "type": "object",
  "allOf": [
    { "$ref": "cognitive-profile.schema.json" }
  ],
  "required": ["profileType", "diagnosis", "socialCommunication", "restrictedBehaviors", "sensoryProcessing", "strengthsProfile", "autismAACAdaptation"],
  "properties": {
    "profileType": {
      "type": "string",
      "const": "autism"
    },
    "diagnosis": {
      "$ref": "#/definitions/AutismDiagnosis"
    },
    "socialCommunication": {
      "$ref": "#/definitions/SocialCommunicationDomain"
    },
    "restrictedBehaviors": {
      "$ref": "#/definitions/RestrictedBehaviorsDomain"
    },
    "sensoryProcessing": {
      "$ref": "#/definitions/SensoryProcessingDomain"
    },
    "strengthsProfile": {
      "$ref": "#/definitions/AutismStrengths"
    },
    "autismAACAdaptation": {
      "$ref": "#/definitions/AutismAACAdaptation"
    }
  },
  "definitions": {
    "CognitiveLevel": {
      "type": "integer",
      "minimum": 1,
      "maximum": 5
    },
    "SeverityLevel": {
      "type": "integer",
      "minimum": 0,
      "maximum": 3,
      "description": "0=NONE, 1=MILD, 2=MODERATE, 3=SEVERE"
    },
    "SensoryReactivity": {
      "type": "string",
      "enum": ["hypo", "typical", "hyper", "mixed"]
    },
    "AutismDiagnosis": {
      "type": "object",
      "required": ["supportLevel", "languageStatus", "intellectualStatus"],
      "properties": {
        "supportLevel": {
          "type": "integer",
          "minimum": 1,
          "maximum": 3,
          "description": "DSM-5 support level: 1=Requiring Support, 2=Requiring Substantial Support, 3=Requiring Very Substantial Support"
        },
        "languageStatus": {
          "type": "string",
          "enum": ["nonverbal", "minimally_verbal", "verbal_limited", "verbal_fluent"]
        },
        "intellectualStatus": {
          "type": "string",
          "enum": ["intellectual_disability", "borderline", "average", "above_average"]
        },
        "diagnosisAge": {
          "type": "integer",
          "minimum": 0
        },
        "diagnosisDate": {
          "type": "string",
          "format": "date"
        },
        "comorbidities": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },
    "SocialCommunicationDomain": {
      "type": "object",
      "required": ["jointAttention", "socialReciprocity", "nonverbalCommunication", "socialRelationships"],
      "properties": {
        "jointAttention": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "canInitiate": { "type": "boolean" },
            "canRespond": { "type": "boolean" },
            "preferredCues": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["pointing", "gaze", "verbal"]
              }
            }
          }
        },
        "socialReciprocity": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "turnTaking": { "type": "boolean" },
            "emotionalReciprocity": { "$ref": "#/definitions/CognitiveLevel" }
          }
        },
        "nonverbalCommunication": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "usesFacialExpressions": { "type": "boolean" },
            "usesGestures": { "type": "boolean" },
            "understandsFacialExpressions": { "$ref": "#/definitions/CognitiveLevel" },
            "understandsBodyLanguage": { "$ref": "#/definitions/CognitiveLevel" },
            "eyeContact": {
              "type": "integer",
              "minimum": 1,
              "maximum": 5,
              "description": "1=AVOIDS, 2=MINIMAL, 3=INCONSISTENT, 4=FUNCTIONAL, 5=TYPICAL"
            }
          }
        },
        "socialRelationships": {
          "type": "object",
          "required": ["level"],
          "properties": {
            "level": { "$ref": "#/definitions/CognitiveLevel" },
            "interestInPeers": { "type": "boolean" },
            "abilityToMaintainFriendships": { "$ref": "#/definitions/CognitiveLevel" }
          }
        }
      }
    },
    "RestrictedBehaviorsDomain": {
      "type": "object",
      "required": ["stereotypedBehaviors", "routineAdherence", "specialInterests", "sensoryInterests"],
      "properties": {
        "stereotypedBehaviors": {
          "type": "object",
          "required": ["severity"],
          "properties": {
            "severity": { "$ref": "#/definitions/SeverityLevel" },
            "motorStereotypies": {
              "type": "array",
              "items": { "type": "string" }
            },
            "vocalStereotypies": {
              "type": "array",
              "items": { "type": "string" }
            },
            "selfStimulation": {
              "type": "array",
              "items": { "type": "string" }
            }
          }
        },
        "routineAdherence": {
          "type": "object",
          "required": ["severity"],
          "properties": {
            "severity": { "$ref": "#/definitions/SeverityLevel" },
            "rigidityLevel": {
              "type": "number",
              "minimum": 1,
              "maximum": 10
            },
            "transitionDifficulty": {
              "type": "number",
              "minimum": 1,
              "maximum": 10
            },
            "ritualBehaviors": {
              "type": "array",
              "items": { "type": "string" }
            }
          }
        },
        "specialInterests": {
          "type": "object",
          "required": ["topics"],
          "properties": {
            "topics": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SpecialInterest"
              }
            },
            "intensity": {
              "type": "number",
              "minimum": 1,
              "maximum": 10
            },
            "usableForAAC": { "type": "boolean" }
          }
        },
        "sensoryInterests": {
          "type": "object",
          "properties": {
            "seeking": {
              "type": "array",
              "items": { "type": "string" }
            },
            "avoiding": {
              "type": "array",
              "items": { "type": "string" }
            }
          }
        }
      }
    },
    "SpecialInterest": {
      "type": "object",
      "required": ["topic"],
      "properties": {
        "topic": { "type": "string" },
        "intensity": {
          "type": "number",
          "minimum": 1,
          "maximum": 10
        },
        "ageOfOnset": {
          "type": "integer",
          "minimum": 0
        },
        "functionalUse": { "type": "boolean" }
      }
    },
    "SensoryProcessingDomain": {
      "type": "object",
      "required": ["visual", "auditory", "tactile", "vestibular", "proprioceptive"],
      "properties": {
        "visual": { "$ref": "#/definitions/SensoryProfile" },
        "auditory": { "$ref": "#/definitions/SensoryProfile" },
        "tactile": { "$ref": "#/definitions/SensoryProfile" },
        "vestibular": { "$ref": "#/definitions/SensoryProfile" },
        "proprioceptive": { "$ref": "#/definitions/SensoryProfile" },
        "gustatory": { "$ref": "#/definitions/SensoryProfile" },
        "olfactory": { "$ref": "#/definitions/SensoryProfile" },
        "multiSensoryIntegration": { "$ref": "#/definitions/CognitiveLevel" }
      }
    },
    "SensoryProfile": {
      "type": "object",
      "required": ["reactivity"],
      "properties": {
        "reactivity": { "$ref": "#/definitions/SensoryReactivity" },
        "seekingBehaviors": {
          "type": "array",
          "items": { "type": "string" }
        },
        "avoidanceBehaviors": {
          "type": "array",
          "items": { "type": "string" }
        },
        "specificTriggers": {
          "type": "array",
          "items": { "type": "string" }
        },
        "copingStrategies": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },
    "AutismStrengths": {
      "type": "object",
      "properties": {
        "visualStrengths": {
          "type": "object",
          "properties": {
            "hasStrength": { "type": "boolean" },
            "visualMemory": { "$ref": "#/definitions/CognitiveLevel" },
            "patternRecognition": { "$ref": "#/definitions/CognitiveLevel" },
            "detailOrientation": { "$ref": "#/definitions/CognitiveLevel" }
          }
        },
        "systematicThinking": {
          "type": "object",
          "properties": {
            "hasStrength": { "type": "boolean" },
            "categorization": { "$ref": "#/definitions/CognitiveLevel" },
            "ruleFollowing": { "$ref": "#/definitions/CognitiveLevel" },
            "sequencing": { "$ref": "#/definitions/CognitiveLevel" }
          }
        },
        "memoryStrengths": {
          "type": "object",
          "properties": {
            "hasStrength": { "type": "boolean" },
            "roteMemory": { "$ref": "#/definitions/CognitiveLevel" },
            "factualMemory": { "$ref": "#/definitions/CognitiveLevel" },
            "proceduralMemory": { "$ref": "#/definitions/CognitiveLevel" }
          }
        },
        "interestExpertise": {
          "type": "object",
          "properties": {
            "hasStrength": { "type": "boolean" },
            "depthOfKnowledge": { "$ref": "#/definitions/CognitiveLevel" },
            "topics": {
              "type": "array",
              "items": { "type": "string" }
            }
          }
        },
        "reliabilityStrengths": {
          "type": "object",
          "properties": {
            "honesty": { "type": "boolean" },
            "consistency": { "type": "boolean" },
            "attention_to_rules": { "type": "boolean" }
          }
        }
      }
    },
    "AutismAACAdaptation": {
      "type": "object",
      "required": ["symbolPreferences", "layoutPreferences", "transitionSupport", "socialSupport", "selfRegulation", "motivation"],
      "properties": {
        "symbolPreferences": {
          "type": "object",
          "required": ["type"],
          "properties": {
            "type": {
              "type": "string",
              "enum": ["photos", "pictograms", "text", "mixed"]
            },
            "realismLevel": {
              "type": "integer",
              "minimum": 1,
              "maximum": 5
            },
            "consistentStyle": { "type": "boolean" },
            "preferredSystems": {
              "type": "array",
              "items": { "type": "string" }
            }
          }
        },
        "layoutPreferences": {
          "type": "object",
          "required": ["type"],
          "properties": {
            "type": {
              "type": "string",
              "enum": ["grid", "scene", "linear", "categorical"]
            },
            "predictable": { "type": "boolean" },
            "minimalClutter": { "type": "boolean" },
            "categoryBased": { "type": "boolean" }
          }
        },
        "transitionSupport": {
          "type": "object",
          "required": ["required"],
          "properties": {
            "required": { "type": "boolean" },
            "visualTimers": { "type": "boolean" },
            "countdowns": { "type": "boolean" },
            "socialStories": { "type": "boolean" },
            "firstThenBoards": { "type": "boolean" }
          }
        },
        "socialSupport": {
          "type": "object",
          "properties": {
            "conversationScripts": { "type": "boolean" },
            "socialPhraseBank": { "type": "boolean" },
            "emotionRecognitionAids": { "type": "boolean" },
            "pragmaticPrompts": { "type": "boolean" }
          }
        },
        "selfRegulation": {
          "type": "object",
          "properties": {
            "calmingStrategies": { "type": "boolean" },
            "breakRequests": { "type": "boolean" },
            "sensoryTools": { "type": "boolean" },
            "emotionScales": { "type": "boolean" }
          }
        },
        "motivation": {
          "type": "object",
          "properties": {
            "useSpecialInterests": { "type": "boolean" },
            "tokenEconomy": { "type": "boolean" },
            "visualRewards": { "type": "boolean" },
            "predictableRewards": { "type": "boolean" }
          }
        }
      }
    }
  }
}
