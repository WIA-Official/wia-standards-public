{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia-standards.org/bionic-eye/schemas/captured-frame.schema.json",
  "title": "WIA Bionic Eye Captured Frame",
  "description": "Schema for captured frame data from bionic eye camera system",
  "type": "object",
  "required": ["frameId", "timestamp", "sequenceNumber", "image", "camera"],
  "properties": {
    "frameId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique frame identifier"
    },
    "timestamp": {
      "type": "integer",
      "minimum": 0,
      "description": "Unix timestamp in milliseconds"
    },
    "sequenceNumber": {
      "type": "integer",
      "minimum": 0,
      "description": "Sequential frame number"
    },
    "deviceId": {
      "type": "string",
      "description": "Camera device identifier"
    },
    "image": {
      "type": "object",
      "required": ["width", "height", "format", "encoding"],
      "properties": {
        "width": {
          "type": "integer",
          "minimum": 160,
          "maximum": 1920,
          "description": "Image width in pixels"
        },
        "height": {
          "type": "integer",
          "minimum": 120,
          "maximum": 1080,
          "description": "Image height in pixels"
        },
        "format": {
          "type": "string",
          "enum": ["gray8", "gray16", "rgb24", "rgbd32", "depth16", "ir8"],
          "description": "Pixel format"
        },
        "encoding": {
          "type": "string",
          "enum": ["raw", "jpeg", "h264", "h265"],
          "description": "Data encoding"
        },
        "dataBase64": {
          "type": "string",
          "description": "Base64 encoded image data"
        },
        "compression": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Compression quality percentage"
        }
      }
    },
    "camera": {
      "type": "object",
      "properties": {
        "fov": {
          "type": "object",
          "properties": {
            "horizontal": { "type": "number", "minimum": 30, "maximum": 180 },
            "vertical": { "type": "number", "minimum": 20, "maximum": 120 }
          }
        },
        "exposure": {
          "type": "number",
          "minimum": 0.01,
          "maximum": 1000,
          "description": "Exposure time in milliseconds"
        },
        "gain": {
          "type": "number",
          "minimum": 100,
          "maximum": 12800,
          "description": "ISO equivalent gain"
        },
        "whiteBalance": {
          "type": "integer",
          "minimum": 2000,
          "maximum": 12000,
          "description": "White balance in Kelvin"
        }
      }
    },
    "sensors": {
      "type": "object",
      "properties": {
        "ambientLight": {
          "type": "number",
          "minimum": 0,
          "description": "Ambient light in lux"
        },
        "proximity": {
          "type": "number",
          "minimum": 0,
          "description": "Proximity sensor reading in cm"
        },
        "imu": {
          "type": "object",
          "properties": {
            "accelerometer": {
              "type": "array",
              "items": { "type": "number" },
              "minItems": 3,
              "maxItems": 3
            },
            "gyroscope": {
              "type": "array",
              "items": { "type": "number" },
              "minItems": 3,
              "maxItems": 3
            },
            "orientation": {
              "type": "object",
              "properties": {
                "roll": { "type": "number" },
                "pitch": { "type": "number" },
                "yaw": { "type": "number" }
              }
            }
          }
        }
      }
    }
  }
}
