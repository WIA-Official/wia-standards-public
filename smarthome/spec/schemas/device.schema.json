{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia.live/schemas/smarthome/device.schema.json",
  "title": "WIA Smart Home Device",
  "description": "Smart home device with accessibility features",
  "type": "object",
  "required": ["device_id", "device_type", "name"],
  "properties": {
    "device_id": {
      "type": "string",
      "format": "uuid"
    },
    "matter_node_id": {
      "type": "string",
      "description": "Matter protocol node ID"
    },
    "vendor_id": {
      "type": "string",
      "pattern": "^0x[0-9A-Fa-f]{4}$",
      "description": "Matter Vendor ID"
    },
    "product_id": {
      "type": "string",
      "pattern": "^0x[0-9A-Fa-f]{4}$",
      "description": "Matter Product ID"
    },
    "device_type": {
      "$ref": "#/$defs/DeviceType"
    },
    "name": {
      "type": "string",
      "maxLength": 100
    },
    "zone_id": {
      "type": "string",
      "format": "uuid"
    },
    "home_id": {
      "type": "string",
      "format": "uuid"
    },
    "status": {
      "type": "string",
      "enum": ["online", "offline", "error", "updating"],
      "default": "offline"
    },
    "firmware_version": {
      "type": "string"
    },
    "capabilities": {
      "type": "object",
      "properties": {
        "on_off": { "type": "boolean" },
        "dimming": { "type": "boolean" },
        "color_control": { "type": "boolean" },
        "color_temperature": { "type": "boolean" },
        "temperature_sensing": { "type": "boolean" },
        "humidity_sensing": { "type": "boolean" },
        "motion_sensing": { "type": "boolean" },
        "contact_sensing": { "type": "boolean" },
        "lock_control": { "type": "boolean" },
        "thermostat": { "type": "boolean" },
        "fan_control": { "type": "boolean" },
        "window_covering": { "type": "boolean" },
        "media_playback": { "type": "boolean" },
        "camera": { "type": "boolean" },
        "doorbell": { "type": "boolean" }
      }
    },
    "current_state": {
      "type": "object",
      "additionalProperties": true,
      "description": "Current device state (dynamic)"
    },
    "accessibility_features": {
      "$ref": "#/$defs/AccessibilityFeatures"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "manufacturer": { "type": "string" },
        "model": { "type": "string" },
        "serial_number": { "type": "string" },
        "installation_date": { "type": "string", "format": "date" },
        "last_maintenance": { "type": "string", "format": "date" }
      }
    }
  },
  "$defs": {
    "DeviceType": {
      "type": "string",
      "enum": [
        "light",
        "light_dimmer",
        "light_color",
        "switch",
        "outlet",
        "thermostat",
        "fan",
        "air_purifier",
        "humidifier",
        "lock",
        "doorbell",
        "camera",
        "alarm",
        "blind",
        "curtain",
        "garage_door",
        "motion_sensor",
        "contact_sensor",
        "temperature_sensor",
        "humidity_sensor",
        "leak_sensor",
        "smoke_detector",
        "co_detector",
        "speaker",
        "tv",
        "media_player",
        "vacuum",
        "washer",
        "dryer",
        "refrigerator",
        "oven",
        "hub",
        "bridge",
        "other"
      ]
    },
    "AccessibilityFeatures": {
      "type": "object",
      "properties": {
        "supported_inputs": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["voice", "touch", "switch", "gaze", "gesture", "remote"]
          }
        },
        "supported_outputs": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["visual_led", "visual_screen", "audio_tts", "audio_tone", "haptic"]
          }
        },
        "voice_commands": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/VoiceCommand"
          }
        },
        "audio_feedback": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean", "default": true },
            "volume": { "type": "integer", "minimum": 0, "maximum": 100 },
            "tts_voice": { "type": "string" },
            "tones": {
              "type": "object",
              "additionalProperties": { "type": "string" }
            }
          }
        },
        "visual_feedback": {
          "type": "object",
          "properties": {
            "led_indicators": { "type": "boolean" },
            "high_contrast": { "type": "boolean" },
            "large_icons": { "type": "boolean" }
          }
        },
        "haptic_feedback": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "pattern": { "type": "string" },
            "intensity": { "type": "integer", "minimum": 0, "maximum": 100 }
          }
        },
        "timing": {
          "type": "object",
          "properties": {
            "response_timeout_ms": { "type": "integer", "default": 5000 },
            "confirmation_required": { "type": "boolean", "default": false },
            "dwell_time_ms": { "type": "integer", "default": 1000 }
          }
        }
      }
    },
    "VoiceCommand": {
      "type": "object",
      "required": ["command", "action"],
      "properties": {
        "command": {
          "type": "string",
          "description": "Primary voice command"
        },
        "aliases": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Alternative phrases"
        },
        "action": {
          "type": "string",
          "description": "Action to execute"
        },
        "parameters": {
          "type": "object",
          "additionalProperties": true
        },
        "confirmation_phrase": {
          "type": "string",
          "description": "TTS confirmation"
        }
      }
    }
  }
}
