{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia.live/schemas/smarthome/zone.schema.json",
  "title": "WIA Smart Home Zone",
  "description": "Room or area within a smart home with accessibility overrides",
  "type": "object",
  "required": ["zone_id", "home_id", "name", "type"],
  "properties": {
    "zone_id": {
      "type": "string",
      "format": "uuid"
    },
    "home_id": {
      "type": "string",
      "format": "uuid"
    },
    "name": {
      "type": "string",
      "maxLength": 100
    },
    "type": {
      "$ref": "#/$defs/ZoneType"
    },
    "floor": {
      "type": "integer",
      "description": "Floor number (0 = ground floor)"
    },
    "parent_zone_id": {
      "type": "string",
      "format": "uuid",
      "description": "Parent zone for nested zones"
    },
    "devices": {
      "type": "array",
      "items": {
        "type": "string",
        "format": "uuid"
      }
    },
    "occupancy": {
      "type": "object",
      "properties": {
        "is_occupied": { "type": "boolean" },
        "occupant_count": { "type": "integer" },
        "last_motion_at": { "type": "string", "format": "date-time" }
      }
    },
    "environment": {
      "type": "object",
      "properties": {
        "temperature_celsius": { "type": "number" },
        "humidity_percent": { "type": "number" },
        "light_level_lux": { "type": "number" },
        "noise_level_db": { "type": "number" },
        "air_quality_index": { "type": "integer" }
      }
    },
    "accessibility_overrides": {
      "type": "object",
      "description": "Zone-specific accessibility settings that override home defaults",
      "properties": {
        "volume_level": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100
        },
        "brightness_level": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100
        },
        "announcement_enabled": {
          "type": "boolean",
          "description": "Enable TTS announcements in this zone"
        },
        "motion_lighting": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "brightness": { "type": "integer", "minimum": 0, "maximum": 100 },
            "timeout_seconds": { "type": "integer" }
          }
        },
        "path_lighting": {
          "type": "object",
          "description": "Light path guidance for navigation",
          "properties": {
            "enabled": { "type": "boolean" },
            "color": { "type": "string" },
            "brightness": { "type": "integer" }
          }
        },
        "audio_zones": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "speaker_id": { "type": "string", "format": "uuid" },
              "default_volume": { "type": "integer" },
              "tts_enabled": { "type": "boolean" }
            }
          }
        },
        "safety_features": {
          "type": "object",
          "properties": {
            "fall_detection_enabled": { "type": "boolean" },
            "inactivity_alert_minutes": { "type": "integer" },
            "emergency_button_enabled": { "type": "boolean" }
          }
        }
      }
    },
    "scenes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "scene_id": { "type": "string" },
          "name": { "type": "string" },
          "voice_trigger": { "type": "string" },
          "device_states": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "device_id": { "type": "string", "format": "uuid" },
                "state": { "type": "object" }
              }
            }
          }
        }
      }
    }
  },
  "$defs": {
    "ZoneType": {
      "type": "string",
      "enum": [
        "bedroom",
        "master_bedroom",
        "living_room",
        "kitchen",
        "dining_room",
        "bathroom",
        "office",
        "study",
        "hallway",
        "entrance",
        "foyer",
        "garage",
        "basement",
        "attic",
        "laundry",
        "closet",
        "balcony",
        "patio",
        "garden",
        "outdoor",
        "other"
      ]
    }
  }
}
