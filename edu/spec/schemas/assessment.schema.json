{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia.live/schemas/edu/assessment.schema.json",
  "title": "WIA Education Assessment",
  "description": "Assessment with accessibility accommodations following QTI accessibility patterns",
  "type": "object",
  "required": ["assessment_id", "schema_version", "title", "type", "created_at"],
  "properties": {
    "assessment_id": {
      "type": "string",
      "format": "uuid"
    },
    "schema_version": {
      "type": "string",
      "const": "1.0.0"
    },
    "title": {
      "type": "string",
      "minLength": 1
    },
    "description": {
      "type": "string"
    },
    "type": {
      "type": "string",
      "enum": [
        "quiz",
        "exam",
        "assignment",
        "project",
        "discussion",
        "peer_review",
        "self_assessment",
        "portfolio",
        "presentation",
        "practical",
        "survey"
      ]
    },
    "created_at": {
      "type": "string",
      "format": "date-time"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time"
    },
    "assessment_info": {
      "$ref": "#/$defs/AssessmentInfo"
    },
    "timing": {
      "$ref": "#/$defs/TimingSettings"
    },
    "questions": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/Question"
      }
    },
    "accessibility_settings": {
      "$ref": "#/$defs/AssessmentAccessibility"
    },
    "accommodations_available": {
      "$ref": "#/$defs/AccommodationsAvailable"
    },
    "grading": {
      "$ref": "#/$defs/GradingSettings"
    },
    "metadata": {
      "type": "object",
      "additionalProperties": true
    }
  },
  "$defs": {
    "AssessmentInfo": {
      "type": "object",
      "properties": {
        "course_id": {
          "type": "string",
          "format": "uuid"
        },
        "module_id": {
          "type": "string",
          "format": "uuid"
        },
        "instructions": {
          "type": "string"
        },
        "purpose": {
          "type": "string",
          "enum": ["formative", "summative", "diagnostic", "placement", "practice"]
        },
        "weight": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Percentage weight in course grade"
        },
        "attempts_allowed": {
          "type": "integer",
          "minimum": 1,
          "default": 1
        },
        "due_date": {
          "type": "string",
          "format": "date-time"
        },
        "available_from": {
          "type": "string",
          "format": "date-time"
        },
        "available_until": {
          "type": "string",
          "format": "date-time"
        },
        "learning_outcomes": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "description": "Learning outcomes this assessment measures"
        }
      }
    },
    "TimingSettings": {
      "type": "object",
      "properties": {
        "time_limit_minutes": {
          "type": "integer",
          "minimum": 0,
          "description": "0 means unlimited"
        },
        "late_submission": {
          "type": "object",
          "properties": {
            "allowed": {
              "type": "boolean",
              "default": false
            },
            "penalty_percent_per_day": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "max_late_days": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "auto_submit": {
          "type": "boolean",
          "default": true,
          "description": "Auto-submit when time expires"
        },
        "show_timer": {
          "type": "boolean",
          "default": true
        },
        "timer_warning_minutes": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "description": "Minutes remaining when to show warnings"
        }
      }
    },
    "Question": {
      "type": "object",
      "required": ["question_id", "type", "content"],
      "properties": {
        "question_id": {
          "type": "string",
          "format": "uuid"
        },
        "type": {
          "type": "string",
          "enum": [
            "multiple_choice",
            "multiple_select",
            "true_false",
            "short_answer",
            "essay",
            "fill_blank",
            "matching",
            "ordering",
            "hotspot",
            "drag_drop",
            "file_upload",
            "recording",
            "code",
            "math",
            "drawing"
          ]
        },
        "content": {
          "$ref": "#/$defs/QuestionContent"
        },
        "points": {
          "type": "number",
          "minimum": 0
        },
        "required": {
          "type": "boolean",
          "default": true
        },
        "options": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/AnswerOption"
          }
        },
        "correct_answers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "IDs or values of correct answers"
        },
        "feedback": {
          "$ref": "#/$defs/QuestionFeedback"
        },
        "hints": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "accessibility": {
          "$ref": "#/$defs/QuestionAccessibility"
        },
        "bloom_level": {
          "type": "string",
          "enum": ["remember", "understand", "apply", "analyze", "evaluate", "create"]
        },
        "difficulty": {
          "type": "string",
          "enum": ["easy", "medium", "hard"]
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "QuestionContent": {
      "type": "object",
      "required": ["text"],
      "properties": {
        "text": {
          "type": "string",
          "description": "Question text (may include HTML/markdown)"
        },
        "plain_text": {
          "type": "string",
          "description": "Plain text version for screen readers"
        },
        "audio_url": {
          "type": "string",
          "format": "uri",
          "description": "Audio version of the question"
        },
        "video_url": {
          "type": "string",
          "format": "uri"
        },
        "image": {
          "type": "object",
          "properties": {
            "url": {
              "type": "string",
              "format": "uri"
            },
            "alt_text": {
              "type": "string"
            },
            "long_description": {
              "type": "string"
            }
          }
        },
        "attachments": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "url": {
                "type": "string",
                "format": "uri"
              },
              "type": {
                "type": "string"
              },
              "title": {
                "type": "string"
              },
              "alt_text": {
                "type": "string"
              }
            }
          }
        },
        "math_notation": {
          "type": "object",
          "properties": {
            "latex": {
              "type": "string"
            },
            "mathml": {
              "type": "string"
            },
            "spoken": {
              "type": "string",
              "description": "Spoken version of math"
            }
          }
        }
      }
    },
    "AnswerOption": {
      "type": "object",
      "required": ["option_id", "text"],
      "properties": {
        "option_id": {
          "type": "string"
        },
        "text": {
          "type": "string"
        },
        "plain_text": {
          "type": "string"
        },
        "image": {
          "type": "object",
          "properties": {
            "url": {
              "type": "string",
              "format": "uri"
            },
            "alt_text": {
              "type": "string"
            }
          }
        },
        "feedback": {
          "type": "string",
          "description": "Feedback if this option is selected"
        }
      }
    },
    "QuestionFeedback": {
      "type": "object",
      "properties": {
        "correct": {
          "type": "string"
        },
        "incorrect": {
          "type": "string"
        },
        "partial": {
          "type": "string"
        },
        "general": {
          "type": "string"
        },
        "show_when": {
          "type": "string",
          "enum": ["immediately", "after_submission", "after_due_date", "after_all_attempts", "never"],
          "default": "after_submission"
        }
      }
    },
    "QuestionAccessibility": {
      "type": "object",
      "properties": {
        "screen_reader_hint": {
          "type": "string",
          "description": "Additional context for screen reader users"
        },
        "keyboard_instructions": {
          "type": "string"
        },
        "cognitive_load": {
          "type": "string",
          "enum": ["low", "medium", "high"]
        },
        "requires_vision": {
          "type": "boolean",
          "default": false,
          "description": "Question fundamentally requires visual ability"
        },
        "requires_hearing": {
          "type": "boolean",
          "default": false
        },
        "requires_fine_motor": {
          "type": "boolean",
          "default": false
        },
        "alternative_available": {
          "type": "boolean",
          "default": false,
          "description": "Alternative version available for accessibility"
        },
        "alternative_question_id": {
          "type": "string",
          "format": "uuid"
        },
        "hazards": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["flashing", "motion", "sound", "time_pressure"]
          }
        }
      }
    },
    "AssessmentAccessibility": {
      "type": "object",
      "description": "Overall assessment accessibility settings",
      "properties": {
        "keyboard_navigable": {
          "type": "boolean",
          "default": true
        },
        "screen_reader_compatible": {
          "type": "boolean",
          "default": true
        },
        "supports_zoom": {
          "type": "boolean",
          "default": true
        },
        "color_independent": {
          "type": "boolean",
          "default": true
        },
        "question_order": {
          "type": "string",
          "enum": ["fixed", "random", "student_choice"],
          "default": "fixed"
        },
        "navigation": {
          "type": "string",
          "enum": ["linear", "nonlinear"],
          "default": "nonlinear",
          "description": "Whether students can navigate freely between questions"
        },
        "review_answers": {
          "type": "boolean",
          "default": true,
          "description": "Allow reviewing answers before submission"
        },
        "save_progress": {
          "type": "boolean",
          "default": true,
          "description": "Auto-save progress"
        },
        "resume_allowed": {
          "type": "boolean",
          "default": true,
          "description": "Allow resuming after interruption"
        }
      }
    },
    "AccommodationsAvailable": {
      "type": "object",
      "description": "Accommodations that can be enabled for individual students",
      "properties": {
        "timing": {
          "type": "object",
          "properties": {
            "extended_time": {
              "type": "object",
              "properties": {
                "available": {
                  "type": "boolean",
                  "default": true
                },
                "multipliers": {
                  "type": "array",
                  "items": {
                    "type": "number"
                  },
                  "default": [1.5, 2.0, 2.5, 3.0]
                }
              }
            },
            "unlimited_time": {
              "type": "boolean",
              "default": false
            },
            "stop_clock_for_breaks": {
              "type": "boolean",
              "default": true
            },
            "flexible_scheduling": {
              "type": "boolean",
              "default": true
            }
          }
        },
        "presentation": {
          "type": "object",
          "properties": {
            "large_print": {
              "type": "boolean",
              "default": true
            },
            "high_contrast": {
              "type": "boolean",
              "default": true
            },
            "screen_reader": {
              "type": "boolean",
              "default": true
            },
            "text_to_speech": {
              "type": "boolean",
              "default": true
            },
            "braille": {
              "type": "boolean",
              "default": false
            },
            "sign_language_video": {
              "type": "boolean",
              "default": false
            },
            "simplified_language": {
              "type": "boolean",
              "default": false
            },
            "color_overlay": {
              "type": "boolean",
              "default": true
            },
            "line_reader": {
              "type": "boolean",
              "default": true
            }
          }
        },
        "response": {
          "type": "object",
          "properties": {
            "keyboard_only": {
              "type": "boolean",
              "default": true
            },
            "speech_to_text": {
              "type": "boolean",
              "default": true
            },
            "scribe": {
              "type": "boolean",
              "default": false,
              "description": "Human scribe to record answers"
            },
            "word_processor": {
              "type": "boolean",
              "default": true
            },
            "spell_check": {
              "type": "boolean",
              "default": true
            },
            "grammar_check": {
              "type": "boolean",
              "default": true
            },
            "audio_response": {
              "type": "boolean",
              "default": true
            },
            "video_response": {
              "type": "boolean",
              "default": false
            }
          }
        },
        "setting": {
          "type": "object",
          "properties": {
            "separate_location": {
              "type": "boolean",
              "default": true
            },
            "small_group": {
              "type": "boolean",
              "default": true
            },
            "reduced_distractions": {
              "type": "boolean",
              "default": true
            },
            "breaks": {
              "type": "object",
              "properties": {
                "allowed": {
                  "type": "boolean",
                  "default": true
                },
                "frequency_minutes": {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  },
                  "default": [15, 30, 45, 60]
                },
                "duration_minutes": {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  },
                  "default": [5, 10, 15]
                }
              }
            }
          }
        },
        "assistance": {
          "type": "object",
          "properties": {
            "calculator": {
              "type": "object",
              "properties": {
                "basic": {
                  "type": "boolean",
                  "default": false
                },
                "scientific": {
                  "type": "boolean",
                  "default": false
                },
                "graphing": {
                  "type": "boolean",
                  "default": false
                }
              }
            },
            "dictionary": {
              "type": "object",
              "properties": {
                "standard": {
                  "type": "boolean",
                  "default": false
                },
                "bilingual": {
                  "type": "boolean",
                  "default": false
                }
              }
            },
            "formula_sheet": {
              "type": "boolean",
              "default": false
            },
            "notes": {
              "type": "boolean",
              "default": false
            },
            "reader": {
              "type": "boolean",
              "default": true,
              "description": "Human reader for questions"
            }
          }
        },
        "alternative_formats": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["paper", "oral", "practical_demonstration", "portfolio", "project"]
          }
        }
      }
    },
    "GradingSettings": {
      "type": "object",
      "properties": {
        "total_points": {
          "type": "number",
          "minimum": 0
        },
        "passing_score": {
          "type": "number",
          "minimum": 0
        },
        "passing_percentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "grading_type": {
          "type": "string",
          "enum": ["automatic", "manual", "hybrid"]
        },
        "partial_credit": {
          "type": "boolean",
          "default": true
        },
        "negative_scoring": {
          "type": "boolean",
          "default": false
        },
        "show_score": {
          "type": "string",
          "enum": ["immediately", "after_submission", "after_due_date", "after_grading", "never"]
        },
        "show_correct_answers": {
          "type": "string",
          "enum": ["immediately", "after_submission", "after_due_date", "after_all_attempts", "never"]
        },
        "rubric": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "criterion": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "max_points": {
                "type": "number"
              },
              "levels": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "level": {
                      "type": "string"
                    },
                    "points": {
                      "type": "number"
                    },
                    "description": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "examples": [
    {
      "assessment_id": "880e8400-e29b-41d4-a716-446655440005",
      "schema_version": "1.0.0",
      "title": "Week 1 Quiz: Variables and Data Types",
      "description": "Quiz covering basic programming concepts",
      "type": "quiz",
      "created_at": "2025-01-15T00:00:00Z",
      "assessment_info": {
        "course_id": "660e8400-e29b-41d4-a716-446655440001",
        "purpose": "formative",
        "attempts_allowed": 2
      },
      "timing": {
        "time_limit_minutes": 30,
        "show_timer": true,
        "timer_warning_minutes": [10, 5, 1]
      },
      "questions": [
        {
          "question_id": "880e8400-e29b-41d4-a716-446655440006",
          "type": "multiple_choice",
          "content": {
            "text": "What is a variable in programming?",
            "plain_text": "What is a variable in programming?"
          },
          "points": 10,
          "options": [
            {
              "option_id": "a",
              "text": "A container that stores data"
            },
            {
              "option_id": "b",
              "text": "A type of loop"
            },
            {
              "option_id": "c",
              "text": "A programming language"
            },
            {
              "option_id": "d",
              "text": "A computer component"
            }
          ],
          "correct_answers": ["a"],
          "bloom_level": "remember",
          "difficulty": "easy"
        }
      ],
      "accessibility_settings": {
        "keyboard_navigable": true,
        "screen_reader_compatible": true,
        "navigation": "nonlinear",
        "review_answers": true
      },
      "accommodations_available": {
        "timing": {
          "extended_time": {
            "available": true,
            "multipliers": [1.5, 2.0]
          }
        },
        "presentation": {
          "large_print": true,
          "text_to_speech": true
        },
        "response": {
          "keyboard_only": true,
          "spell_check": true
        }
      },
      "grading": {
        "total_points": 100,
        "passing_percentage": 70,
        "grading_type": "automatic",
        "show_score": "after_submission"
      }
    }
  ]
}
