{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://wia.live/schemas/edu/content.schema.json",
  "title": "WIA Education Content",
  "description": "Educational content with accessibility metadata following AccessForAll Digital Resource Description",
  "type": "object",
  "required": ["content_id", "schema_version", "title", "type", "created_at"],
  "properties": {
    "content_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the content"
    },
    "schema_version": {
      "type": "string",
      "const": "1.0.0"
    },
    "title": {
      "type": "string",
      "minLength": 1
    },
    "description": {
      "type": "string"
    },
    "type": {
      "type": "string",
      "enum": [
        "text_article",
        "document",
        "presentation",
        "video",
        "audio",
        "image",
        "animation",
        "interactive",
        "simulation",
        "game",
        "assessment",
        "dataset",
        "code",
        "external_resource"
      ]
    },
    "created_at": {
      "type": "string",
      "format": "date-time"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time"
    },
    "dublin_core": {
      "$ref": "#/$defs/DublinCore"
    },
    "educational_metadata": {
      "$ref": "#/$defs/EducationalMetadata"
    },
    "accessibility": {
      "$ref": "#/$defs/AccessibilityMetadata"
    },
    "technical": {
      "$ref": "#/$defs/TechnicalMetadata"
    },
    "alternatives": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/AlternativeResource"
      }
    },
    "rights": {
      "$ref": "#/$defs/RightsMetadata"
    }
  },
  "$defs": {
    "DublinCore": {
      "type": "object",
      "description": "Dublin Core metadata elements",
      "properties": {
        "creator": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "contributor": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "publisher": {
          "type": "string"
        },
        "subject": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "language": {
          "type": "string",
          "pattern": "^[a-z]{2}(-[A-Z]{2})?$"
        },
        "coverage": {
          "type": "string",
          "description": "Spatial or temporal topic coverage"
        },
        "date": {
          "type": "string",
          "format": "date"
        },
        "identifier": {
          "type": "string",
          "description": "External identifier (DOI, ISBN, etc.)"
        },
        "source": {
          "type": "string",
          "description": "Related resource from which this is derived"
        },
        "relation": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Related resources"
        }
      }
    },
    "EducationalMetadata": {
      "type": "object",
      "description": "Educational context and usage",
      "properties": {
        "learning_resource_type": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "lecture",
              "tutorial",
              "demonstration",
              "exercise",
              "problem_set",
              "case_study",
              "simulation",
              "experiment",
              "reference",
              "glossary",
              "worked_example",
              "practice",
              "assessment",
              "discussion",
              "collaboration"
            ]
          }
        },
        "intended_audience": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["student", "instructor", "administrator", "parent", "general_public"]
          }
        },
        "education_level": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "preschool",
              "elementary",
              "middle_school",
              "high_school",
              "undergraduate",
              "graduate",
              "professional",
              "vocational",
              "continuing_education"
            ]
          }
        },
        "typical_age_range": {
          "type": "object",
          "properties": {
            "min": {
              "type": "integer",
              "minimum": 0
            },
            "max": {
              "type": "integer",
              "maximum": 150
            }
          }
        },
        "typical_learning_time": {
          "type": "object",
          "properties": {
            "minutes": {
              "type": "integer",
              "minimum": 0
            },
            "description": {
              "type": "string"
            }
          }
        },
        "interactivity_type": {
          "type": "string",
          "enum": ["active", "expositive", "mixed"]
        },
        "interactivity_level": {
          "type": "string",
          "enum": ["very_low", "low", "medium", "high", "very_high"]
        },
        "difficulty": {
          "type": "string",
          "enum": ["very_easy", "easy", "medium", "difficult", "very_difficult"]
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "learning_objectives": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "prerequisites": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "AccessibilityMetadata": {
      "type": "object",
      "description": "Accessibility features and hazards following AccessForAll DRD",
      "properties": {
        "accessibility_features": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "alternative_text",
              "annotations",
              "aria",
              "audio_description",
              "bookmarks",
              "braille",
              "captions",
              "chem_ml",
              "described_math",
              "display_transformability",
              "high_contrast_audio",
              "high_contrast_display",
              "index",
              "large_print",
              "latex",
              "long_description",
              "math_ml",
              "none",
              "print_page_numbers",
              "reading_order",
              "ruby_annotations",
              "sign_language",
              "sound",
              "structural_navigation",
              "synchronized_audio_text",
              "table_of_contents",
              "tactile_graphic",
              "tactile_object",
              "tagged_pdf",
              "timing_control",
              "transcript",
              "tts_markup",
              "unlocked"
            ]
          },
          "description": "Accessibility features present in the content"
        },
        "accessibility_hazards": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "flashing",
              "motion_simulation",
              "sound",
              "no_flashing_hazard",
              "no_motion_simulation_hazard",
              "no_sound_hazard",
              "none",
              "unknown"
            ]
          },
          "description": "Potential hazards in the content"
        },
        "accessibility_api": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "aria",
              "android_accessibility",
              "at_spi",
              "blackberry_accessibility",
              "i_accessible2",
              "ios_accessibility",
              "java_access_bridge",
              "mac_osx_accessibility",
              "msaa",
              "ui_automation"
            ]
          }
        },
        "accessibility_control": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "full_keyboard_control",
              "full_mouse_control",
              "full_switch_control",
              "full_touch_control",
              "full_video_control",
              "full_voice_control"
            ]
          }
        },
        "accessibility_summary": {
          "type": "string",
          "description": "Human-readable summary of accessibility features and issues"
        },
        "access_mode": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["auditory", "chart_on_visual", "chem_on_visual", "color_dependent", "diagram_on_visual", "math_on_visual", "music_on_visual", "tactile", "text_on_visual", "textual", "visual"]
          },
          "description": "Human sensory perceptual systems needed to access the content"
        },
        "access_mode_sufficient": {
          "type": "array",
          "items": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "description": "Sets of access modes sufficient to understand the content"
        },
        "wcag_conformance": {
          "type": "object",
          "properties": {
            "level": {
              "type": "string",
              "enum": ["A", "AA", "AAA", "not_evaluated"]
            },
            "version": {
              "type": "string",
              "enum": ["2.0", "2.1", "2.2"]
            },
            "evaluation_date": {
              "type": "string",
              "format": "date"
            },
            "evaluator": {
              "type": "string"
            },
            "issues": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "criterion": {
                    "type": "string",
                    "description": "WCAG success criterion (e.g., '1.1.1')"
                  },
                  "description": {
                    "type": "string"
                  },
                  "severity": {
                    "type": "string",
                    "enum": ["minor", "moderate", "serious", "critical"]
                  }
                }
              }
            }
          }
        },
        "adaptations_available": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "font_size",
              "font_family",
              "font_color",
              "background_color",
              "line_spacing",
              "word_spacing",
              "text_style",
              "layout",
              "display_brightness"
            ]
          },
          "description": "User-controllable adaptations"
        }
      }
    },
    "TechnicalMetadata": {
      "type": "object",
      "properties": {
        "format": {
          "type": "string",
          "description": "MIME type"
        },
        "size_bytes": {
          "type": "integer",
          "minimum": 0
        },
        "duration_seconds": {
          "type": "number",
          "minimum": 0,
          "description": "Duration for time-based media"
        },
        "dimensions": {
          "type": "object",
          "properties": {
            "width": {
              "type": "integer"
            },
            "height": {
              "type": "integer"
            }
          }
        },
        "location": {
          "type": "string",
          "format": "uri"
        },
        "requirements": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["browser", "plugin", "software", "hardware", "network"]
              },
              "name": {
                "type": "string"
              },
              "version": {
                "type": "string"
              }
            }
          }
        },
        "encoding": {
          "type": "string",
          "description": "Character encoding for text content"
        }
      }
    },
    "AlternativeResource": {
      "type": "object",
      "description": "Alternative or adapted version of the content",
      "required": ["alternative_id", "type"],
      "properties": {
        "alternative_id": {
          "type": "string",
          "format": "uuid"
        },
        "type": {
          "type": "string",
          "enum": [
            "transcript",
            "captions",
            "audio_description",
            "sign_language",
            "simplified_language",
            "easy_read",
            "large_print",
            "braille",
            "tactile",
            "audio_version",
            "described_images",
            "described_math",
            "translation"
          ]
        },
        "language": {
          "type": "string",
          "pattern": "^[a-z]{2}(-[A-Z]{2})?$"
        },
        "location": {
          "type": "string",
          "format": "uri"
        },
        "format": {
          "type": "string",
          "description": "MIME type"
        },
        "description": {
          "type": "string"
        },
        "is_machine_generated": {
          "type": "boolean",
          "default": false,
          "description": "Whether this was generated automatically (e.g., auto-captions)"
        },
        "quality_verified": {
          "type": "boolean",
          "default": false
        }
      }
    },
    "RightsMetadata": {
      "type": "object",
      "properties": {
        "license": {
          "type": "string",
          "description": "License identifier (e.g., 'CC-BY-4.0')"
        },
        "license_url": {
          "type": "string",
          "format": "uri"
        },
        "copyright_holder": {
          "type": "string"
        },
        "copyright_year": {
          "type": "integer"
        },
        "usage_rights": {
          "type": "string"
        },
        "cost": {
          "type": "string",
          "enum": ["free", "freemium", "paid"]
        }
      }
    }
  },
  "examples": [
    {
      "content_id": "770e8400-e29b-41d4-a716-446655440002",
      "schema_version": "1.0.0",
      "title": "Introduction to Variables",
      "description": "Video lesson explaining programming variables",
      "type": "video",
      "created_at": "2025-01-10T10:00:00Z",
      "dublin_core": {
        "creator": ["Dr. Kim"],
        "language": "ko",
        "subject": ["programming", "computer science"]
      },
      "educational_metadata": {
        "learning_resource_type": ["lecture"],
        "education_level": ["high_school", "undergraduate"],
        "typical_learning_time": {
          "minutes": 15
        },
        "difficulty": "easy"
      },
      "accessibility": {
        "accessibility_features": [
          "captions",
          "transcript",
          "audio_description"
        ],
        "accessibility_hazards": [
          "no_flashing_hazard",
          "no_motion_simulation_hazard"
        ],
        "access_mode": ["auditory", "visual"],
        "access_mode_sufficient": [["auditory"], ["visual", "textual"]],
        "wcag_conformance": {
          "level": "AA",
          "version": "2.1"
        }
      },
      "technical": {
        "format": "video/mp4",
        "duration_seconds": 900,
        "location": "https://edu.wia.live/content/intro-variables.mp4"
      },
      "alternatives": [
        {
          "alternative_id": "770e8400-e29b-41d4-a716-446655440003",
          "type": "transcript",
          "language": "ko",
          "location": "https://edu.wia.live/content/intro-variables-transcript.txt"
        },
        {
          "alternative_id": "770e8400-e29b-41d4-a716-446655440004",
          "type": "captions",
          "language": "ko",
          "location": "https://edu.wia.live/content/intro-variables.vtt",
          "quality_verified": true
        }
      ],
      "rights": {
        "license": "CC-BY-4.0",
        "cost": "free"
      }
    }
  ]
}
