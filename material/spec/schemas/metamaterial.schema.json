{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/material/v1/metamaterial.schema.json",
  "title": "WIA Material - Metamaterial",
  "description": "Schema for metamaterials (electromagnetic, acoustic, mechanical)",
  "allOf": [
    { "$ref": "wia-material-v1.schema.json" }
  ],
  "properties": {
    "material_type": {
      "const": "metamaterial"
    },
    "properties": {
      "type": "object",
      "properties": {
        "domain_specific": {
          "type": "object",
          "required": ["metamaterial_type"],
          "properties": {
            "metamaterial_type": {
              "type": "string",
              "enum": ["electromagnetic", "acoustic", "mechanical", "photonic"],
              "description": "Type of metamaterial"
            },
            "unit_cell": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "description": "Unit cell geometry type",
                  "examples": ["split_ring_resonator", "helmholtz_resonator", "lattice"]
                },
                "period_um": {
                  "type": "number",
                  "minimum": 0,
                  "description": "Unit cell period in micrometers"
                },
                "dimensions": {
                  "type": "object",
                  "description": "Detailed dimensions of the unit cell"
                }
              }
            },
            "permittivity_real": {
              "type": "number",
              "description": "Real part of effective permittivity"
            },
            "permittivity_imag": {
              "type": "number",
              "description": "Imaginary part of effective permittivity"
            },
            "permeability_real": {
              "type": "number",
              "description": "Real part of effective permeability"
            },
            "permeability_imag": {
              "type": "number",
              "description": "Imaginary part of effective permeability"
            },
            "refractive_index": {
              "type": "number",
              "description": "Effective refractive index (can be negative)"
            },
            "operating_frequency_Hz": {
              "type": "number",
              "minimum": 0,
              "description": "Operating frequency in Hz"
            },
            "bandwidth_Hz": {
              "type": "number",
              "minimum": 0,
              "description": "Operating bandwidth in Hz"
            },
            "absorption_percent": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "Absorption rate in percent"
            },
            "effective_density_kg_m3": {
              "type": "number",
              "description": "Effective mass density (for acoustic metamaterials)"
            },
            "effective_bulk_modulus_Pa": {
              "type": "number",
              "description": "Effective bulk modulus (for acoustic metamaterials)"
            },
            "transmission_loss_dB": {
              "type": "number",
              "minimum": 0,
              "description": "Transmission loss in dB"
            },
            "sound_absorption_coefficient": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Sound absorption coefficient (0 to 1)"
            },
            "negative_index": {
              "type": "boolean",
              "description": "Whether the material exhibits negative refractive index"
            },
            "cloaking_capable": {
              "type": "boolean",
              "description": "Whether the material can be used for cloaking applications"
            }
          }
        }
      }
    }
  }
}
