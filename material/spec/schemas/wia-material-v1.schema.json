{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/material/v1/schema.json",
  "title": "WIA Material Data Format",
  "description": "Standard data format for material science data exchange",
  "type": "object",
  "required": ["version", "material_type", "material_id", "timestamp", "identity", "properties"],
  "properties": {
    "$schema": {
      "type": "string",
      "format": "uri",
      "description": "JSON Schema URI"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Specification version (Semantic Versioning)",
      "examples": ["1.0.0"]
    },
    "material_type": {
      "type": "string",
      "enum": [
        "superconductor",
        "metamaterial",
        "programmable_matter",
        "holographic_storage",
        "memristor",
        "topological_insulator",
        "custom"
      ],
      "description": "Material science domain identifier"
    },
    "material_id": {
      "type": "string",
      "pattern": "^wia-mat-[a-zA-Z0-9]{8}$",
      "description": "Unique material identifier",
      "examples": ["wia-mat-00000001"]
    },
    "timestamp": {
      "type": "object",
      "required": ["created"],
      "properties": {
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "Record creation time (ISO 8601)"
        },
        "modified": {
          "type": "string",
          "format": "date-time",
          "description": "Record modification time (ISO 8601)"
        }
      }
    },
    "identity": {
      "type": "object",
      "required": ["name", "formula"],
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "description": "Material name",
          "examples": ["Bismuth Selenide", "YBCO"]
        },
        "formula": {
          "type": "string",
          "minLength": 1,
          "description": "Chemical formula",
          "examples": ["Bi2Se3", "YBa2Cu3O7-x"]
        },
        "classification": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Classification tags",
          "examples": [["chalcogenide", "topological_insulator"]]
        }
      }
    },
    "structure": {
      "type": "object",
      "properties": {
        "crystal_system": {
          "type": "string",
          "enum": [
            "cubic",
            "tetragonal",
            "orthorhombic",
            "hexagonal",
            "trigonal",
            "rhombohedral",
            "monoclinic",
            "triclinic",
            "amorphous"
          ],
          "description": "Crystal system"
        },
        "space_group": {
          "type": "string",
          "description": "Hermann-Mauguin notation",
          "examples": ["R-3m", "Fm-3m", "Pmmm"]
        },
        "lattice_parameters": {
          "type": "object",
          "properties": {
            "a_angstrom": { "type": "number", "minimum": 0 },
            "b_angstrom": { "type": "number", "minimum": 0 },
            "c_angstrom": { "type": "number", "minimum": 0 },
            "alpha_degree": { "type": "number", "minimum": 0, "maximum": 180 },
            "beta_degree": { "type": "number", "minimum": 0, "maximum": 180 },
            "gamma_degree": { "type": "number", "minimum": 0, "maximum": 180 }
          }
        }
      }
    },
    "properties": {
      "type": "object",
      "properties": {
        "electrical": {
          "type": "object",
          "properties": {
            "resistivity_ohm_m": { "type": "number" },
            "conductivity_S_m": { "type": "number" },
            "carrier_mobility_cm2_Vs": { "type": "number" },
            "carrier_concentration_cm3": { "type": "number" },
            "band_gap_eV": { "type": "number" }
          }
        },
        "magnetic": {
          "type": "object",
          "properties": {
            "magnetic_susceptibility": { "type": "number" },
            "permeability": { "type": "number" },
            "saturation_magnetization_A_m": { "type": "number" },
            "coercivity_A_m": { "type": "number" }
          }
        },
        "thermal": {
          "type": "object",
          "properties": {
            "thermal_conductivity_W_mK": { "type": "number" },
            "specific_heat_J_kgK": { "type": "number" },
            "melting_point_K": { "type": "number" },
            "thermal_expansion_K": { "type": "number" }
          }
        },
        "optical": {
          "type": "object",
          "properties": {
            "refractive_index": { "type": "number" },
            "absorption_coefficient_cm": { "type": "number" },
            "transmittance_percent": { "type": "number" },
            "reflectance_percent": { "type": "number" }
          }
        },
        "mechanical": {
          "type": "object",
          "properties": {
            "density_kg_m3": { "type": "number" },
            "youngs_modulus_GPa": { "type": "number" },
            "poissons_ratio": { "type": "number" },
            "hardness_GPa": { "type": "number" }
          }
        },
        "domain_specific": {
          "type": "object",
          "description": "Domain-specific properties (varies by material_type)"
        },
        "custom": {
          "type": "object",
          "description": "Custom user-defined properties"
        }
      }
    },
    "measurement": {
      "type": "object",
      "properties": {
        "temperature_K": {
          "type": "number",
          "minimum": 0,
          "description": "Measurement temperature in Kelvin"
        },
        "pressure_Pa": {
          "type": "number",
          "minimum": 0,
          "description": "Measurement pressure in Pascal"
        },
        "magnetic_field_T": {
          "type": "number",
          "description": "External magnetic field in Tesla"
        },
        "electric_field_V_m": {
          "type": "number",
          "description": "External electric field in V/m"
        },
        "method": {
          "type": "string",
          "description": "Measurement method",
          "examples": ["four_probe", "ARPES", "SQUID", "XRD"]
        },
        "instrument": {
          "type": "string",
          "description": "Measurement instrument",
          "examples": ["Keithley 2400", "PPMS DynaCool"]
        }
      }
    },
    "provenance": {
      "type": "object",
      "properties": {
        "source": {
          "type": "string",
          "description": "DOI or URL",
          "examples": ["DOI:10.1038/s41586-023-00001-1"]
        },
        "lab": {
          "type": "string",
          "description": "Laboratory or institution name"
        },
        "operator": {
          "type": "string",
          "description": "Researcher or operator"
        }
      }
    },
    "external_references": {
      "type": "object",
      "properties": {
        "materials_project_id": { "type": "string" },
        "icsd_id": { "type": "string" },
        "cod_id": { "type": "string" },
        "doi": { "type": "string" }
      },
      "description": "References to external databases"
    },
    "meta": {
      "type": "object",
      "properties": {
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Data confidence level (0.0 to 1.0)"
        },
        "validated": {
          "type": "boolean",
          "description": "Whether data has been validated"
        },
        "notes": {
          "type": "string",
          "description": "Additional notes"
        }
      }
    }
  }
}
