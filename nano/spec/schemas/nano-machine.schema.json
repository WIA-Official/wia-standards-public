{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/nano/v1/nano-machine.schema.json",
  "title": "WIA Nano Machine Data",
  "description": "Schema for nano machine (molecular motor, switch, pump) system data",
  "type": "object",
  "required": ["machine_type", "machine_id", "state"],
  "properties": {
    "machine_type": {
      "type": "string",
      "enum": ["rotary_motor", "linear_motor", "molecular_switch", "molecular_pump", "molecular_gear", "custom"]
    },
    "machine_id": {
      "type": "string",
      "minLength": 1
    },
    "position": {
      "type": "object",
      "properties": {
        "x_nm": { "type": "number" },
        "y_nm": { "type": "number" },
        "z_nm": { "type": "number" }
      }
    },
    "orientation": {
      "type": "object",
      "properties": {
        "quaternion": {
          "$ref": "wia-nano-base-v1.schema.json#/definitions/Quaternion"
        }
      }
    },
    "state": {
      "type": "object",
      "required": ["mode"],
      "properties": {
        "mode": {
          "type": "string",
          "enum": ["idle", "active", "stalled", "reversing", "error"]
        },
        "power_source": {
          "type": "string",
          "enum": ["atp", "light", "chemical", "thermal", "electrical", "magnetic"]
        },
        "energy_level_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        }
      }
    },
    "kinematics": {
      "type": "object",
      "properties": {
        "rotation_deg": {
          "type": "number",
          "description": "Current rotation angle for rotary motors"
        },
        "angular_velocity_rpm": {
          "type": "number",
          "description": "Rotational speed in RPM"
        },
        "linear_position_nm": {
          "type": "number",
          "description": "Current position for linear motors"
        },
        "linear_velocity_nm_per_s": {
          "type": "number",
          "description": "Linear speed in nm/s"
        },
        "torque_pn_nm": {
          "type": "number",
          "minimum": 0,
          "description": "Torque in pNÂ·nm"
        },
        "force_pn": {
          "type": "number",
          "minimum": 0,
          "description": "Force in pN"
        },
        "cycles_completed": {
          "type": "integer",
          "minimum": 0
        },
        "step_size_nm": {
          "type": "number",
          "minimum": 0,
          "description": "Step size for stepping motors"
        }
      }
    },
    "payload": {
      "type": "object",
      "properties": {
        "loaded": { "type": "boolean" },
        "cargo_type": { "type": "string" },
        "cargo_count": {
          "type": "integer",
          "minimum": 0
        },
        "cargo_mass_da": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "diagnostics": {
      "type": "object",
      "properties": {
        "structural_integrity": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "efficiency": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "temperature_k": {
          "type": "number",
          "minimum": 0
        },
        "last_maintenance": {
          "type": "string",
          "format": "date-time"
        }
      }
    }
  }
}
