{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/nano/v1/nanosensor.schema.json",
  "title": "WIA Nano Nanosensor Data",
  "description": "Schema for nanosensor system data",
  "type": "object",
  "required": ["sensor_type", "sensor_id", "target", "measurement"],
  "properties": {
    "sensor_type": {
      "type": "string",
      "enum": ["quantum_dot", "nanowire", "plasmonic", "carbon_nanotube", "graphene", "mems", "custom"]
    },
    "sensor_id": {
      "type": "string",
      "minLength": 1
    },
    "physical": {
      "type": "object",
      "properties": {
        "diameter_nm": { "type": "number", "minimum": 0 },
        "length_nm": { "type": "number", "minimum": 0 },
        "coating": { "type": "string" },
        "core_material": { "type": "string" },
        "shell_material": { "type": "string" },
        "functionalization": { "type": "string" }
      }
    },
    "target": {
      "type": "object",
      "required": ["analyte"],
      "properties": {
        "analyte": {
          "type": "string",
          "description": "Target analyte name"
        },
        "category": {
          "type": "string",
          "enum": ["cardiac_biomarker", "cancer_biomarker", "metabolite", "ion", "gas", "pathogen", "dna", "protein", "drug", "toxin", "custom"]
        }
      }
    },
    "measurement": {
      "type": "object",
      "required": ["value", "unit"],
      "properties": {
        "value": { "type": "number" },
        "unit": { "type": "string" },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "performance": {
      "type": "object",
      "properties": {
        "detection_limit": { "type": "number", "minimum": 0 },
        "dynamic_range_min": { "type": "number" },
        "dynamic_range_max": { "type": "number" },
        "sensitivity": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "specificity": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "response_time_ms": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "signal": {
      "type": "object",
      "properties": {
        "raw_intensity": { "type": "number" },
        "baseline": { "type": "number" },
        "snr_db": {
          "type": "number",
          "description": "Signal-to-noise ratio in dB"
        },
        "emission_wavelength_nm": { "type": "number", "minimum": 0 },
        "excitation_wavelength_nm": { "type": "number", "minimum": 0 }
      }
    },
    "calibration": {
      "type": "object",
      "properties": {
        "last_calibrated": {
          "type": "string",
          "format": "date-time"
        },
        "curve_id": { "type": "string" },
        "r_squared": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "valid_until": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "status": {
      "type": "object",
      "properties": {
        "operational": { "type": "boolean" },
        "saturation_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "remaining_lifetime_h": {
          "type": "number",
          "minimum": 0
        },
        "contamination_level": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      }
    }
  }
}
