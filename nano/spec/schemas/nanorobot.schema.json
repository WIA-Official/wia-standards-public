{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia.live/nano/v1/nanorobot.schema.json",
  "title": "WIA Nano Nanorobot Data",
  "description": "Schema for nanorobot system data",
  "type": "object",
  "required": ["robot_type", "robot_id", "position", "power", "mission"],
  "properties": {
    "robot_type": {
      "type": "string",
      "enum": ["medical", "diagnostic", "repair", "cleaning", "delivery", "custom"]
    },
    "robot_id": {
      "type": "string",
      "minLength": 1
    },
    "dimensions": {
      "type": "object",
      "properties": {
        "length_nm": { "type": "number", "minimum": 0 },
        "width_nm": { "type": "number", "minimum": 0 },
        "height_nm": { "type": "number", "minimum": 0 }
      }
    },
    "position": {
      "type": "object",
      "required": ["x_um", "y_um", "z_um"],
      "properties": {
        "x_um": { "type": "number" },
        "y_um": { "type": "number" },
        "z_um": { "type": "number" },
        "coordinate_system": {
          "type": "string",
          "enum": ["absolute", "body_relative", "organ_relative"]
        },
        "reference_organ": { "type": "string" }
      }
    },
    "orientation": {
      "type": "object",
      "properties": {
        "quaternion": {
          "$ref": "wia-nano-base-v1.schema.json#/definitions/Quaternion"
        }
      }
    },
    "navigation": {
      "type": "object",
      "properties": {
        "mode": {
          "type": "string",
          "enum": ["manual", "autonomous", "swarm", "follow", "idle"]
        },
        "target_um": {
          "type": "object",
          "properties": {
            "x": { "type": "number" },
            "y": { "type": "number" },
            "z": { "type": "number" }
          }
        },
        "algorithm": {
          "type": "string",
          "enum": ["a_star", "rrt", "potential_field", "swarm_based", "chemical_gradient"]
        },
        "eta_seconds": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "propulsion": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["flagellar", "chemical", "magnetic", "acoustic", "optical", "hybrid"]
        },
        "speed_um_per_s": {
          "type": "number",
          "minimum": 0
        },
        "power_fw": {
          "type": "number",
          "minimum": 0,
          "description": "Power consumption in femtowatts"
        },
        "efficiency_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        }
      }
    },
    "sensors": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "type"],
        "properties": {
          "id": { "type": "string" },
          "type": {
            "type": "string",
            "enum": ["chemical", "ph", "temperature", "pressure", "optical", "magnetic", "ultrasonic"]
          },
          "target": { "type": "string" },
          "value": { "type": "number" },
          "unit": { "type": "string" },
          "accuracy": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          }
        }
      }
    },
    "actuators": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "type"],
        "properties": {
          "id": { "type": "string" },
          "type": {
            "type": "string",
            "enum": ["gripper", "drug_injector", "cutter", "welder", "probe"]
          },
          "state": { "type": "string" },
          "grip_force_pn": { "type": "number" },
          "payload_remaining_percent": {
            "type": "number",
            "minimum": 0,
            "maximum": 100
          }
        }
      }
    },
    "communication": {
      "type": "object",
      "properties": {
        "protocol": {
          "type": "string",
          "enum": ["ultrasonic", "molecular", "terahertz", "optical", "magnetic"]
        },
        "frequency_mhz": { "type": "number", "minimum": 0 },
        "signal_strength_dbm": { "type": "number" },
        "last_contact_ms_ago": { "type": "integer", "minimum": 0 }
      }
    },
    "power": {
      "type": "object",
      "required": ["level_percent"],
      "properties": {
        "source": {
          "type": "string",
          "enum": ["glucose_fuel_cell", "atp", "magnetic_induction", "ultrasonic", "optical", "battery"]
        },
        "level_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "consumption_fw": {
          "type": "number",
          "minimum": 0
        },
        "estimated_runtime_h": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "mission": {
      "type": "object",
      "required": ["type", "status"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["drug_delivery", "diagnostics", "tissue_repair", "pathogen_removal", "imaging", "biopsy", "custom"]
        },
        "status": {
          "type": "string",
          "enum": ["idle", "preparing", "in_progress", "paused", "completed", "failed", "aborted", "returning"]
        },
        "objectives_completed": { "type": "integer", "minimum": 0 },
        "objectives_total": { "type": "integer", "minimum": 0 },
        "priority": {
          "type": "string",
          "enum": ["low", "normal", "high", "critical"]
        }
      }
    }
  }
}
