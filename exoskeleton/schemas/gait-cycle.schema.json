{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wia-standards.org/exoskeleton/schemas/gait-cycle.schema.json",
  "title": "WIA Exoskeleton Gait Cycle",
  "description": "Schema for rehabilitation exoskeleton gait cycle data",
  "type": "object",
  "required": ["phase", "percentComplete", "timing", "spatial"],
  "properties": {
    "phase": {
      "$ref": "#/definitions/GaitPhase"
    },
    "percentComplete": {
      "type": "number",
      "minimum": 0,
      "maximum": 100,
      "description": "Percentage of gait cycle completed (0-100%)"
    },
    "timing": {
      "$ref": "#/definitions/GaitTiming"
    },
    "spatial": {
      "$ref": "#/definitions/SpatialParameters"
    }
  },
  "definitions": {
    "GaitPhase": {
      "type": "string",
      "enum": [
        "right_stance",
        "left_stance",
        "initial_double_support",
        "terminal_double_support",
        "right_swing",
        "left_swing",
        "heel_strike",
        "foot_flat",
        "midstance",
        "heel_off",
        "toe_off"
      ],
      "description": "Current phase of the gait cycle"
    },
    "GaitTiming": {
      "type": "object",
      "description": "Temporal parameters of gait",
      "required": [
        "cycleStart",
        "stanceStart",
        "swingStart",
        "cycleDuration",
        "stanceDuration",
        "swingDuration"
      ],
      "properties": {
        "cycleStart": {
          "type": "integer",
          "minimum": 0,
          "description": "Cycle start timestamp (Unix ms)"
        },
        "stanceStart": {
          "type": "integer",
          "minimum": 0,
          "description": "Stance phase start timestamp (Unix ms)"
        },
        "swingStart": {
          "type": "integer",
          "minimum": 0,
          "description": "Swing phase start timestamp (Unix ms)"
        },
        "cycleDuration": {
          "type": "number",
          "minimum": 500,
          "maximum": 3000,
          "description": "Total cycle duration in milliseconds"
        },
        "stanceDuration": {
          "type": "number",
          "minimum": 0,
          "description": "Stance phase duration in milliseconds"
        },
        "swingDuration": {
          "type": "number",
          "minimum": 0,
          "description": "Swing phase duration in milliseconds"
        }
      }
    },
    "SpatialParameters": {
      "type": "object",
      "description": "Spatial parameters of gait",
      "required": [
        "strideLength",
        "stepLength",
        "stepWidth",
        "cadence",
        "velocity"
      ],
      "properties": {
        "strideLength": {
          "type": "number",
          "minimum": 30,
          "maximum": 250,
          "description": "Stride length in centimeters"
        },
        "stepLength": {
          "type": "number",
          "minimum": 15,
          "maximum": 125,
          "description": "Step length in centimeters"
        },
        "stepWidth": {
          "type": "number",
          "minimum": 0,
          "maximum": 50,
          "description": "Step width in centimeters"
        },
        "cadence": {
          "type": "number",
          "minimum": 30,
          "maximum": 180,
          "description": "Cadence in steps per minute"
        },
        "velocity": {
          "type": "number",
          "minimum": 0,
          "maximum": 3.0,
          "description": "Walking velocity in meters per second"
        }
      }
    }
  },
  "examples": [
    {
      "phase": "midstance",
      "percentComplete": 25.5,
      "timing": {
        "cycleStart": 1702598400000,
        "stanceStart": 1702598400000,
        "swingStart": 1702598400660,
        "cycleDuration": 1100,
        "stanceDuration": 660,
        "swingDuration": 440
      },
      "spatial": {
        "strideLength": 145.2,
        "stepLength": 72.8,
        "stepWidth": 10.5,
        "cadence": 109,
        "velocity": 1.32
      }
    }
  ]
}
